# 📋 dysproto PRD (Product Requirements Document)

**작성일자**: 2025년 1월 19일  
**문서 버전**: 1.0  
**상태**: 초기 제품 요구사항 정의  
**참조 문서**: BRD.md (버전 1.2), dys_FRD.md (버전 1.2), dys_SRD.md (버전 1.2), dys_TSD.md (버전 1.2)

---

## 📌 0. 문서 정보

| 항목 | 내용 |
|------|------|
| **프로젝트명** | dysproto |
| **제품명** | dysproto (미적 데이터 분석 및 성장 멘토링 서비스) |
| **문서 유형** | Product Requirements Document (PRD) |
| **관련 문서** | BRD.md, dys_FRD.md, dys_SRD.md, dys_TSD.md |
| **작성 목적** | BRD, FRD, SRD, TSD를 통합하여 제품 전체 요구사항을 명확히 정의하고, 개발팀이 구현할 수 있는 수준의 상세 명세 제공 |

---

## 📋 목차

1. [실행 요약](#1-실행-요약-executive-summary)
2. [사이트맵 및 네비게이션 구조](#2-사이트맵-및-네비게이션-구조)
3. [프로젝트 배경](#3-프로젝트-배경)
4. [사용자 및 페르소나](#4-사용자-및-페르소나)
5. [기능 명세 (사이트맵 기반)](#5-기능-명세-사이트맵-기반)
   - 5.1 [업로드 및 분석 페이지](#51-업로드-및-분석-페이지-upload)
   - 5.2 [검색 페이지](#52-검색-페이지-search)
   - 5.3 [마이 페이지](#53-마이-페이지-mypage)
   - 5.4 [설정 페이지](#54-설정-페이지-settings)
6. [기술 스택 및 아키텍처](#6-기술-스택-및-아키텍처)
7. [데이터 모델](#7-데이터-모델)
8. [API 명세](#8-api-명세)
9. [알고리즘 및 로직 명세](#9-알고리즘-및-로직-명세)
10. [구현 계획](#10-구현-계획)
11. [성공 지표](#11-성공-지표)
12. [리스크 및 제약사항](#12-리스크-및-제약사항)
13. [부록](#13-부록)

---

## 🎯 1. 실행 요약 (Executive Summary)

### 1.1 프로젝트 개요

**BRD 참조**: Section 1.1

**dysproto**는 디자이너들이 자신의 디자인 스타일을 데이터 기반으로 객관적으로 분석하고 성장할 수 있도록 지원하는 AI 기반 플랫폼입니다.

### 1.2 핵심 가치 제안

- **객관적 분석**: MultiLLM 기반 AI 분석으로 주관적 평가를 객관적 데이터로 전환
- **맞춤형 피드백**: 사용자별 디자인 DNA 프로파일링을 통한 개인화된 성장 지원
- **트렌드 기반 레퍼런스**: 레거시미디어, REDDOT 수상작품 등 긍정적 평가를 받은 디자인 작품을 지향 레퍼런스로 제공
- **대화형 AI 멘토링**: 업로드한 작품을 소스로 AI 챗봇과 지속적인 대화를 통한 인사이트 수집

### 1.3 주요 목표

**BRD 참조**: Section 2.1

- 디자인 스타일의 시각적 요소 분석 및 객관화
- 개인별 디자인 포트폴리오 분석 자동화 및 맞춤 피드백 제공
- 효율적 참조 자료 검색과 성장 트래킹 지원
- 사용자 작업 효율 30% 이상 향상
- 사용자 만족도 90% 이상 달성

---

## 📱 2. 사이트맵 및 네비게이션 구조

### 2.1 전체 사이트맵

```
dysproto
│
├── 📤 업로드 페이지 (/upload)
│   ├── 이미지 업로드 영역
│   │   ├── 드래그 앤 드롭 영역
│   │   ├── 파일 선택 버튼
│   │   └── 파일 포맷 가이드 텍스트
│   ├── 가이드 버튼 (서비스 소개)
│   ├── 분석 버튼
│   ├── 분석 결과 리포트
│   │   ├── 분석 정보 버튼 (파일명, 분석 일시, 접기/펼치기)
│   │   ├── AI 요약
│   │   ├── 5축 메트릭 (Layout, Typography, Color, Components, Form Language)
│   │   ├── 전체 점수 (Overall Score)
│   │   ├── 색상 팔레트 (HEX, RGB 코드)
│   │   ├── 연관 키워드 (태그 형태)
│   │   ├── 감지 객체 목록
│   │   ├── 활용 제안
│   │   └── 아카이빙 버튼
│   └── AI 챗봇 세션 (하단 고정)
│       ├── 대화 히스토리
│       └── 메시지 입력창
│
├── 🔍 검색 페이지 (/search)
│   ├── 검색 패널
│   │   ├── 텍스트 검색 박스
│   │   ├── 이미지 검색 박스
│   │   └── 사용자 스타일 기반 검색 버튼
│   ├── 카테고리 필터 패널
│   │   └── 보드별 카테고리 선택
│   ├── 검색 결과 그리드
│   │   ├── 이미지 썸네일
│   │   ├── 유사도 점수
│   │   ├── 근거 설명
│   │   └── 보드에 저장 버튼
│   └── 탐색 제어 패널
│       ├── 다양성 슬라이더 (0-100)
│       ├── 스타일 반영 슬라이더 (0-100)
│       └── 연관 키워드 필터
│
├── 👤 마이 페이지 (/mypage)
│   ├── 프로필 관리 섹션
│   │   ├── 프로필 이미지 업로드
│   │   ├── 개인정보 수정 (닉네임, 소개)
│   │   └── 스타일 레이더 차트
│   │       ├── 장르별 도메인 값
│   │       ├── 나의 스타일 시각화
│   │       └── 작품 총 개수 표시
│   ├── 스타일 추적 섹션
│   │   ├── 현재 대표 스타일 이미지
│   │   ├── 스타일 타임라인 (최신순)
│   │   └── 현재 vs 과거 비교 분석
│   │       ├── 비교 차트
│   │       └── 텍스트 분석
│   └── 갤러리 관리 섹션
│       ├── 스타일 폴더 생성/관리
│       ├── 아카이브된 작품 목록 (그리드/리스트 뷰)
│       └── 도메인별 가중치 시각화
│
└── ⚙️ 설정 페이지 (/settings)
    ├── 계정 관리 섹션
    │   ├── 이메일 확인/변경
    │   ├── 전화번호 확인/변경
    │   └── 구독 정보 확인/변경
    ├── 보안 설정 섹션
    │   ├── 비밀번호 변경
    │   ├── 신뢰할 수 있는 장치 관리
    │   └── 로그아웃 (이 기기/모든 장치)
    ├── 알림 설정 섹션
    │   ├── 히스토리 알림 on/off
    │   ├── 주간 리포트 알림 on/off
    │   └── 목표 알림 on/off
    └── 정보 센터 섹션
        ├── 도움말 센터 링크
        ├── 이용약관 링크
        └── 개인정보 보호 정책 링크
```

### 2.2 네비게이션 구조 (GNB)

**위치**: 좌측 사이드바 (고정)

**구성**:
```
┌─────────────────┐
│   [로고]        │ ← 상단
├─────────────────┤
│                 │
│  📤 업로드      │ ← 중간 이상
│  🔍 검색        │
│  👤 마이페이지  │
│                 │
├─────────────────┤
│  💎 구독        │ ← 하단
│  ⚙️ 설정        │
└─────────────────┘
```

**인터랙션**:
- 각 메뉴 아이콘 클릭 시 해당 페이지로 이동
- 현재 페이지 하이라이트 표시
- 모바일: 햄버거 메뉴로 접근

### 2.3 페이지 간 전환 플로우

#### 2.3.1 업로드 페이지 → 검색 페이지

**가로 캐러셀 전환**:
- 업로드 페이지에서 화면 우측에서 왼쪽으로 드래그 (가로 스크롤)
- 가로 캐러셀 구조로 검색 페이지로 이동
- 페이지 전환 애니메이션 적용
- 검색 페이지에서는 업로드 페이지에서 넣은 이미지 중심 관련 이미지 제공
- 트렌드에 부합하는 이미지 상위 노출

**인터랙션**:
- 터치/마우스 드래그로 가로 스크롤
- 스와이프 제스처 지원
- 부드러운 페이지 전환 애니메이션

#### 2.3.2 GNB를 통한 직접 진입

- 좌측 사이드바의 검색 아이콘 클릭
- 장르별 무작위 이미지 제공
- 트렌드에 부합하는 이미지 상위 노출

---

## 🎨 3. 프로젝트 배경

### 3.1 비즈니스 목적

**BRD 참조**: Section 2.1

- ✅ 디자인 스타일의 시각적 요소 분석 및 객관화
- ✅ 개인별 디자인 포트폴리오 분석 자동화 및 맞춤 피드백 제공
- ✅ 효율적 참조 자료 검색과 성장 트래킹 지원

### 3.2 타겟 사용자

**BRD 참조**: Section 1.3

- **주요 타겟**: 디자인 전공 대학생 및 초기 경력 디자이너
- **세부 프로필**:
  - 연령대: 20대 초중반
  - 전공: 디자인 관련 학과
  - 특징: 성장 의지가 강한 사용자

### 3.3 시장 기회

디자인계 트렌드를 반영한 데이터 및 AI 활용 성장지원 서비스 부족

---

## 👥 4. 사용자 및 페르소나

### 4.1 사용자 역할

**FRD 참조**: Section 2.1

#### 4.1.1 일반 사용자 (Regular User)
- 기본 기능 사용 (이미지 업로드, 분석, 검색)
- 무료 플랜 사용자
- 제한된 저장 공간

#### 4.1.2 프리미엄 사용자 (Premium User)
- 모든 일반 사용자 권한
- 고급 분석 기능 사용
- 무제한 저장 공간
- 우선 지원

### 4.2 사용자 페르소나

**FRD 참조**: Section 2.2

#### 페르소나 1: 초보 디자이너 "김디자인"
- 나이: 22세, 디자인 전공 대학생 (3학년)
- 목표: 포트폴리오 품질 향상, 객관적 피드백을 통한 성장
- 페인 포인트: 주관적 평가, 개선 방향 불명확, 참고 자료 찾기 어려움
- 사용 패턴: 주 2-3회 포트폴리오 업로드, 분석 결과를 바탕으로 개선, 검색 기능을 통한 참고 자료 수집

#### 페르소나 2: 주니어 디자이너 "이포트폴리오"
- 나이: 25세, 주니어 그래픽 디자이너 (경력 2년)
- 목표: 포트폴리오 다양성 확보, 시장 트렌드 파악
- 페인 포인트: 시간 부족, 트렌드 파악 어려움, 성장 추적 어려움
- 사용 패턴: 주 1-2회 포트폴리오 업로드, 주기적 성장 리포트 확인, 트렌드 분석 기능 활용

#### 페르소나 3: 취업 준비생 "박성장"
- 나이: 23세, 디자인 전공 대학생 (4학년, 취업 준비 중)
- 목표: 취업용 포트폴리오 완성, 객관적 평가 자료 확보
- 페인 포인트: 포트폴리오 평가 기준 불명확, 개선점 파악 어려움
- 사용 패턴: 매일 포트폴리오 업로드 및 분석, 분석 결과를 바탕으로 빠른 개선, 검색 기능을 통한 레퍼런스 수집

### 4.3 사용자 여정

**FRD 참조**: Section 2.3

```
1. 온보딩
   ↓
2. 업로드 및 분석
   - 이미지 업로드
   - AI 분석 실행
   - 분석 결과 확인
   - AI 챗봇 세션 시작 (자동)
   ↓
3. 서칭
   - 가로 캐러셀 또는 GNB를 통한 검색 페이지 진입
   - 검색 실행
   - 결과 탐색
   - 저장
   ↓
4. 마이 페이지
   - 프로필 확인
   - 스타일 추적
   - 갤러리 관리
   ↓
5. 설정
   - 계정 관리
   - 보안 설정
   - 알림 설정
```

---

## 🚀 5. 기능 명세 (사이트맵 기반)

### 5.1 업로드 및 분석 페이지 (/upload)

**BRD 참조**: Section 3.1  
**FRD 참조**: Section 3  
**SRD 참조**: Section 2.1

#### 5.1.1 페이지 개요

사용자가 포트폴리오 이미지를 업로드하고, AI 기반 분석을 통해 디자인 스타일을 객관적으로 평가받는 페이지입니다. 분석 완료 후 AI 챗봇 세션이 자동으로 시작되어 리포트 기반 대화를 진행할 수 있습니다.

#### 5.1.2 주요 기능

##### F-1.1: 이미지 업로드

**요구사항**:
- 드래그 앤 드롭 인터페이스 제공
- 파일 선택 버튼 제공
- 파일 포맷 가이드 텍스트 표시 (JPEG, PNG, WebP, 최대 5MB)
- 업로드 진행률 표시
- 파일 검증 (형식, 크기)

**UI 구성**:
```
┌─────────────────────────────────────┐
│  [GNB 사이드바]                    │
├─────────────────────────────────────┤
│                                     │
│  ┌─────────────────────────────┐   │
│  │                             │   │
│  │   드래그 앤 드롭 영역        │   │
│  │   (파일 포맷 가이드 표시)    │   │
│  │   지원 형식: JPEG, PNG, WebP│   │
│  │   최대 크기: 5MB             │   │
│  │                             │   │
│  └─────────────────────────────┘   │
│                                     │
│  [파일 선택] 버튼                   │
│  [가이드] 버튼                      │
│                                     │
└─────────────────────────────────────┘
```

**기술 명세**:
- Storage 경로: `gs://dysproto.firebasestorage.app/users/{userId}/analyses/{timestamp}_{filename}`
- Storage 리전: `us-east-1`
- Firestore 컬렉션: `analyses`
- 파일 검증: MIME 타입 `image/*`, 최대 크기 5MB

**에러 처리**:
- 지원하지 않는 파일 형식: "지원하지 않는 파일 형식입니다. JPEG, PNG, WebP만 지원합니다."
- 파일 크기 초과: "파일 크기가 5MB를 초과합니다. 더 작은 파일을 업로드해주세요."
- 네트워크 오류: "네트워크 연결을 확인해주세요." + 재시도 버튼

##### F-1.2: AI 분석 실행

**요구사항**:
- 업로드 완료 후 분석 버튼 표시
- 분석 중 상태 표시 (로딩 인디케이터)
- 실시간 상태 업데이트 (Firestore 리스너)
- 분석 완료 시 결과 자동 표시

**처리 로직**:
1. 사용자가 분석 버튼 클릭
2. Cloud Function `analyzeImageOnUpload` 트리거
3. MultiLLM 병렬 분석 실행 (OpenAI GPT-4o, Claude 3.5 Sonnet, Vertex AI Gemini 1.5 Pro Vision)
4. 결과 통합 및 Firestore 저장
5. 프론트엔드 실시간 업데이트

**상태 관리**:
- `analyzing`: 분석 진행 중
- `completed`: 분석 완료
- `failed`: 분석 실패

##### F-1.3: 분석 결과 리포트 표시

**요구사항**:
- 분석 정보 버튼 (파일명, 분석 일시, 접기/펼치기)
- AI 요약 텍스트
- 5축 메트릭 (Layout, Typography, Color, Components, Form Language)
- 전체 점수 (Overall Score)
- 색상 팔레트 (HEX, RGB 코드)
- 연관 키워드 (태그 형태, 클릭 시 검색 이동)
- 감지 객체 목록
- 활용 제안
- 아카이빙 버튼

**UI 구성**:
```
┌─────────────────────────────────────┐
│  [분석 정보] 버튼 (접기/펼치기)     │
│  - 파일명: portfolio.jpg            │
│  - 분석 일시: 2025-01-19 14:30     │
├─────────────────────────────────────┤
│  AI 요약                            │
│  [요약 텍스트...]                   │
├─────────────────────────────────────┤
│  5축 메트릭                         │
│  Layout: 85 [게이지]                │
│  Typography: 78 [게이지]            │
│  Color: 92 [게이지]                 │
│  Components: 80 [게이지]             │
│  Form Language: 75 [게이지]         │
│  전체 점수: 82                      │
├─────────────────────────────────────┤
│  색상 팔레트                        │
│  [색상 칩] #FF5733 RGB(255,87,51)   │
│  [색상 칩] #33C3F0 RGB(51,195,240)  │
├─────────────────────────────────────┤
│  연관 키워드                        │
│  [minimalist] [modern] [clean]      │
├─────────────────────────────────────┤
│  감지 객체                          │
│  - button (신뢰도: 0.95)            │
│  - text (신뢰도: 0.88)              │
├─────────────────────────────────────┤
│  활용 제안                          │
│  [제안 텍스트...]                   │
├─────────────────────────────────────┤
│  [아카이빙] 버튼                    │
└─────────────────────────────────────┘
```

**리포트 상세 명세**:

**5축 메트릭**:
- **Layout** (0-100): 레이아웃 구조, 그리드 시스템, 배치
- **Typography** (0-100): 타이포그래피 시스템, 가독성, 계층
- **Color** (0-100): 색상 팔레트, 대비, 조화
- **Components** (0-100): 컴포넌트 일관성, 재사용성
- **Form Language** (0-100): 형태 언어, 스타일 일관성

**트렌드 정의**:
- 레거시미디어 수상작품
- REDDOT 등 디자인 어워드 수상작
- 담론형성 디자인 작품
- 긍정적 평가를 받는 디자인 작품

**인터랙션**:
- 각 섹션 클릭 시 펼치기/접기
- 색상 팔레트의 색상 클릭 시 HEX 코드 클립보드 복사
- 연관 키워드 클릭 시 검색 페이지로 이동 (해당 키워드로 검색)

##### F-1.4: AI 챗봇 세션

**요구사항**:
- 업로드 완료 후 자동으로 AI 챗봇 세션 시작
- 분석 결과 리포트를 소스로 하여 AI와 대화 가능
- 리포트 하단 고정 채팅 인터페이스
- 스크롤 다운 시에도 채팅 세션 지속 가능
- 리포트 바탕 추가 질문 가능

**UI 구성**:
```
┌─────────────────────────────────────┐
│  [분석 결과 리포트...]              │
│  (스크롤 가능)                       │
│                                     │
├─────────────────────────────────────┤ ← 고정 영역
│  AI 챗봇 세션                       │
│  ┌─────────────────────────────┐   │
│  │ [AI] 안녕하세요! 분석 결과를 │   │
│  │     바탕으로 질문해주세요.   │   │
│  │                             │   │
│  │ [사용자] 타이포그래피가      │   │
│  │         어색해 보여요.       │   │
│  │                             │   │
│  │ [AI] 타이포그래피 개선을 위해│   │
│  │     다음과 같은 제안을...    │   │
│  └─────────────────────────────┘   │
│  [메시지 입력창] [전송]             │
└─────────────────────────────────────┘
```

**기능 상세**:
- 분석 결과 리포트의 모든 정보를 컨텍스트로 활용
- 사용자 질문에 대해 리포트 기반 답변 제공
- 트렌드 레퍼런스 제안
- 개선 방안 제안
- 세션 히스토리 저장 (`critiqueSessions` 컬렉션)

**API 명세**:
- `continueCritique`: HTTP POST `/continueCritique`
- 요청 본문: `{ sessionId, userMessage, context: { userId, analysisId } }`
- 응답: `{ success, sessionId, hypotheses, summary, nextSteps }`

**세션 관리**:
- 세션 ID 자동 생성 또는 기존 세션 재사용
- 대화 히스토리 최대 50개 메시지
- 세션 상태 관리 (`critiqueSessions` 컬렉션)

##### F-1.5: 검색 페이지 가로 캐러셀 이동

**요구사항**:
- 업로드 페이지에서 가로 스크롤 (화면 우측에서 왼쪽으로 드래그)
- 가로 캐러셀 구조로 검색 페이지로 이동
- 검색 페이지에서는 업로드 페이지에서 넣은 이미지 중심 관련 이미지 제공
- 트렌드에 부합하는 이미지 상위 노출

**인터랙션**:
- 터치/마우스 드래그로 가로 스크롤
- 스와이프 제스처 지원
- 페이지 전환 애니메이션
- 검색 페이지 진입 시 업로드한 이미지의 연관 키워드 기반 검색 자동 실행

---

### 5.2 검색 페이지 (/search)

**BRD 참조**: Section 3.3  
**FRD 참조**: Section 4  
**SRD 참조**: Section 2.2

#### 5.2.1 페이지 개요

사용자가 텍스트, 이미지, 또는 자신의 디자인 DNA를 기반으로 유사한 디자인 레퍼런스를 검색하고, 결과를 보드에 저장하는 페이지입니다.

#### 5.2.2 진입 경로

##### 경로 1: 업로드 페이지에서 가로 캐러셀 이동
- 업로드 페이지에서 가로 스크롤 시 검색 페이지로 이동
- 업로드한 이미지 중심 관련 이미지 제공
- 트렌드에 부합하는 이미지 상위 노출

##### 경로 2: GNB에서 직접 진입
- 좌측 사이드바의 검색 아이콘 클릭
- 장르별 무작위 이미지 제공
- 트렌드에 부합하는 이미지 상위 노출

#### 5.2.3 주요 기능

##### F-2.1: 검색 패널

**요구사항**:
- 텍스트 검색 박스
- 이미지 검색 박스 (이미지 업로드)
- 사용자 스타일 기반 검색 버튼 ("내 스타일로 검색")

**UI 구성**:
```
┌─────────────────────────────────────┐
│  검색 패널                          │
│  ┌─────────────────────────────┐   │
│  │ [텍스트 검색] [이미지 검색] │   │
│  │ [내 스타일로 검색]          │   │
│  └─────────────────────────────┘   │
└─────────────────────────────────────┘
```

**검색 타입별 동작**:
- **텍스트 검색**: 키워드 입력 후 검색 실행
- **이미지 검색**: 이미지 업로드 후 유사 이미지 검색
- **스타일 검색**: 사용자의 디자인 DNA 프로파일 기반 검색

##### F-2.2: 검색 결과 표시

**요구사항**:
- 검색 결과 그리드 형태 표시
- 각 결과에 유사도 점수 표시
- 근거 설명 표시 (중앙값 기반)
- 이미지 호버 시 "보드에 저장" 버튼 표시
- 이미지 저장 기능

**트렌드 우선순위**:
- 레거시미디어 수상작품
- REDDOT 등 디자인 어워드 수상작
- 담론형성 디자인 작품
- 긍정적 평가를 받는 디자인 작품

**UI 구성**:
```
┌─────────────────────────────────────┐
│  검색 결과 그리드                    │
│  ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐  │
│  │[img]│ │[img]│ │[img]│ │[img]│  │
│  │ 85% │ │ 82% │ │ 78% │ │ 75% │  │
│  └─────┘ └─────┘ └─────┘ └─────┘  │
│  (호버 시 "보드에 저장" 버튼 표시)  │
└─────────────────────────────────────┘
```

##### F-2.3: 카테고리 필터

**요구사항**:
- 보드별 카테고리 패널
- 카테고리 선택 시 해당 카테고리 이미지만 표시
- 여러 카테고리 동시 선택 가능

**UI 구성**:
```
┌─────────────────────────────────────┐
│  카테고리 패널                      │
│  ☑ 웹 디자인                        │
│  ☐ 모바일 UI                        │
│  ☑ 브랜딩                           │
│  ☐ 인쇄 디자인                       │
└─────────────────────────────────────┘
```

##### F-2.4: 탐색 제어 패널

**요구사항**:
- 다양성 슬라이더 (0-100)
- 스타일 반영 슬라이더 (0-100)
- 연관 키워드 필터
- 슬라이더 조정 시 실시간 결과 업데이트

**UI 구성**:
```
┌─────────────────────────────────────┐
│  탐색 제어 패널                      │
│  다양성: [━━━━━━━━━━] 70           │
│  스타일 반영: [━━━━━━━━━━] 80      │
│  연관 키워드: [minimalist] [clean] │
└─────────────────────────────────────┘
```

---

### 5.3 마이 페이지 (/mypage)

**BRD 참조**: Section 3.1, 3.2  
**FRD 참조**: Section 5  
**SRD 참조**: Section 2.3

#### 5.3.1 페이지 개요

사용자가 자신의 프로필을 관리하고, 디자인 스타일의 변화를 추적하며, 아카이빙된 분석 결과를 갤러리 형태로 관리하는 페이지입니다.

#### 5.3.2 주요 기능

##### F-3.1: 프로필 관리

**요구사항**:
- 프로필 이미지 업로드 (크롭 및 리사이즈)
- 개인정보 수정 (닉네임, 소개)
- 스타일 레이더 차트 표시
  - 장르별 도메인 값
  - 나의 스타일 시각화
  - 작품 총 개수 표시

**UI 구성**:
```
┌─────────────────────────────────────┐
│  프로필 섹션                         │
│  ┌──────────┐  ┌─────────────────┐ │
│  │ [프로필  │  │ 스타일 레이더    │ │
│  │  이미지] │  │ 차트             │ │
│  │          │  │ [도메인 값...]   │ │
│  │ [닉네임] │  │ 작품 총 개수: N │ │
│  │ [소개]   │  └─────────────────┘ │
│  └──────────┘                       │
└─────────────────────────────────────┘
```

**레이더 차트 구성**:
- 장르별 도메인 값 (웹 디자인, 모바일 UI, 브랜딩 등)
- 각 도메인별 가중치 표시
- 나의 스타일 시각화 (다각형 형태)
- 작품 총 개수 표시

##### F-3.2: 스타일 추적

**요구사항**:
- 현재 대표 스타일 이미지 표시
- 이전 대표 이미지 타임라인 (최신순)
- 현재 vs 과거 비교 분석
- 시간축으로 성향/변화 파악

**UI 구성**:
```
┌─────────────────────────────────────┐
│  현재 대표 스타일                    │
│  [이미지] [메트릭] [설명]            │
├─────────────────────────────────────┤
│  스타일 타임라인                     │
│  [과거 스타일들...] (최신순)        │
│                                     │
│  [과거 스타일 클릭 시]              │
│  현재 vs 과거 비교 분석              │
│  [비교 차트] [텍스트 분석]           │
└─────────────────────────────────────┘
```

**비교 분석 기능**:
- 두 스타일의 메트릭 차이 계산
- 메트릭 차이를 시각적으로 표시 (차트, 게이지)
- 텍스트로 상세 비교 분석 제공
- 개선된 영역과 유지된 강점 도출

##### F-3.3: 갤러리 관리

**요구사항**:
- 스타일 폴더 생성 및 관리
- 아카이브된 작품 목록 (그리드/리스트 뷰)
- 도메인별 가중치 시각화
- 폴더별 필터링

**UI 구성**:
```
┌─────────────────────────────────────┐
│  스타일 갤러리                       │
│  [폴더 목록] [새 폴더 생성]          │
├─────────────────────────────────────┤
│  도메인별 가중치                     │
│  [가중치 차트...]                    │
├─────────────────────────────────────┤
│  아카이브된 작품                     │
│  [그리드/리스트 뷰 전환]             │
│  [이미지 그리드...]                  │
└─────────────────────────────────────┘
```

**폴더 관리 기능**:
- 폴더 이름 및 설명 입력
- 폴더 대표 이미지 설정
- 폴더별 이미지 정리
- 폴더 삭제 기능

---

### 5.4 설정 페이지 (/settings)

**BRD 참조**: Section 5.5  
**FRD 참조**: Section 6  
**SRD 참조**: Section 2.4

#### 5.4.1 페이지 개요

사용자가 계정 정보를 관리하고, 보안 설정을 변경하며, 서비스 정보를 확인하는 페이지입니다.

#### 5.4.2 주요 기능

##### F-4.1: 계정 관리
- 이메일 확인/변경 (인증 메일 발송)
- 전화번호 확인/변경 (인증 SMS 발송)
- 구독 정보 확인/변경

##### F-4.2: 보안 설정
- 비밀번호 변경 (현재 비밀번호 확인 필수)
- 신뢰할 수 있는 장치 관리 (장치 목록 표시, 제거 기능)
- 로그아웃 (이 기기/모든 장치)

##### F-4.3: 알림 설정
- 히스토리 알림 on/off
- 주간 리포트 알림 on/off
- 목표 알림 on/off

##### F-4.4: 정보 센터
- 도움말 센터 링크
- 이용약관 링크
- 개인정보 보호 정책 링크

---

## 🏗️ 6. 기술 스택 및 아키텍처

### 6.1 기술 스택 요약

**SRD 참조**: Section 6

#### 프론트엔드
- **React**: 19.1.1
- **React Router**: 7.9.4
- **Firebase SDK**: Storage, Firestore, Analytics

#### 백엔드
- **Firebase Cloud Functions**: v2 (Node.js 20)
- **Firebase Firestore**: NoSQL 데이터베이스
- **Firebase Storage**: 파일 저장소

#### 외부 AI 서비스
- **OpenAI**: GPT-4o, GPT-4o-mini
- **Anthropic**: Claude 3.5 Sonnet
- **Google Vertex AI**: Gemini 1.5 Pro Vision

#### 인프라
- **Google Cloud Platform**: asia-northeast3 (서울)
- **Secret Manager**: API 키 관리
- **Storage 리전**: us-east-1

### 6.2 시스템 아키텍처

**TSD 참조**: Section 1.1

```
Frontend (React)
  ↓
Firebase SDK
  ↓
Firebase Storage / Firestore
  ↓
Cloud Functions (Backend)
  ├── MultiLLM Orchestrator
  ├── AI Analysis Engine
  └── API Endpoints
  ↓
External AI Services (OpenAI, Claude, Vertex AI)
```

### 6.3 인프라 정보

- **GCP Project ID**: `dysproto`
- **Firebase Project ID**: `dysproto`
- **Firebase Project Number**: `894139739522`
- **Storage Bucket**: `gs://dysproto.firebasestorage.app`
- **Storage 리전**: `us-east-1`
- **Firestore 데이터베이스**: `dysproto`
- **Firestore 리전**: `asia-northeast3` (서울)
- **Cloud Functions 리전**: `asia-northeast3` (서울)
- **Authentication**: 익명 인증 활성화 (Phase 0)

---

## 💾 7. 데이터 모델

### 7.1 주요 컬렉션 요약

**SRD 참조**: Section 7  
**TSD 참조**: Section 3

#### 7.1.1 `analyses` 컬렉션

**용도**: 이미지 분석 결과 저장

**주요 필드**:
- `userId`: 사용자 ID
- `fileName`, `filePath`: 파일 정보
- `status`: "analyzing" | "completed" | "failed"
- `analysisResult`: 분석 결과 (5축 메트릭, 인사이트, 요약 등)
- `keywords`: 연관 키워드 배열 (최대 20개)
- `colorPalette`: 색상 팔레트 배열 (최대 10개)
- `detectedObjects`: 감지된 객체 배열
- `archivedAt`: 아카이빙 시각
- `boardIds`: 속한 보드 ID 배열 (최대 100개)

**서브컬렉션**:
- `analyses/{id}/benchmarks/models/{modelKey}/{docId}`: 모델별 벤치마크
- `analyses/{id}/sunburst_cache/current`: Sunburst 캐시

#### 7.1.2 `critiqueSessions` 컬렉션

**용도**: AI 챗봇 세션 관리

**주요 필드**:
- `userId`: 사용자 ID
- `state`: 세션 상태 (현재 상태, 페이즈, 히스토리)
- `conversationHistory`: 대화 히스토리 배열 (최대 50개)
- `metadata`: 버전, 업데이트 시각, 마지막 활동 시각

**서브컬렉션**:
- `critiqueSessions/{id}/messages/{messageId}`: 개별 메시지

#### 7.1.3 `userProfiles` 컬렉션

**용도**: 사용자 프로필 및 DNA 프로파일

**주요 필드**:
- `userId`: 사용자 ID
- `designDNA`: 디자인 DNA 프로파일
  - `averageMetrics`: 평균 메트릭 (5축)
  - `preferences`: 선호도 (색상 팔레트, 스타일, 도메인)
- `profileImage`: 프로필 이미지 URL
- `representativeStyleId`: 현재 대표 스타일 ID
- `styleFolders`: 소유한 스타일 폴더 ID 배열

#### 7.1.4 `boards` 컬렉션

**용도**: 사용자가 생성한 보드 (이미지 컬렉션)

**주요 필드**:
- `userId`: 사용자 ID
- `name`: 보드 이름
- `description`: 보드 설명
- `category`: 카테고리
- `imageIds`: 저장된 이미지 ID 배열 (최대 1000개)
- `coverImageId`: 대표 이미지 ID
- `isPublic`: 공개 여부

#### 7.1.5 `styleFolders` 컬렉션

**용도**: 스타일 갤러리 폴더

**주요 필드**:
- `userId`: 사용자 ID
- `name`: 폴더 이름
- `description`: 폴더 설명
- `representativeImageId`: 폴더 대표 이미지 ID
- `analysisIds`: 포함된 분석 ID 배열

#### 7.1.6 `representativeStyles` 컬렉션

**용도**: 사용자의 대표 스타일

**주요 필드**:
- `userId`: 사용자 ID
- `analysisId`: 해당 분석 문서 ID
- `imageUrl`: 이미지 URL
- `metrics`: 메트릭 점수 (5축 + 전체 점수)
- `description`: 스타일 설명
- `isCurrent`: 현재 대표 스타일 여부
- `createdAt`: 생성 시각

#### 7.1.7 `archivedAnalyses` 컬렉션

**용도**: 아카이브된 분석 결과

**주요 필드**:
- `userId`: 사용자 ID
- `analysisId`: 원본 analyses 문서 ID
- `archivedAt`: 아카이빙 시각
- `folderId`: 속한 폴더 ID (선택사항)
- `tags`: 사용자 태그 배열
- `notes`: 사용자 메모

### 7.2 데이터 관계도

```
userProfiles
  ├── representativeStyles (참조)
  ├── styleFolders (참조)
  ├── boards (참조)
  └── analyses (참조)
      ├── critiqueSessions (참조)
      ├── boardIds (참조)
      └── archivedAnalyses (참조)
          └── folderId (참조)
```

---

## 🔌 8. API 명세

### 8.1 주요 엔드포인트 목록

**TSD 참조**: Section 2.1

#### 8.1.1 업로드 및 분석 관련 API

**`analyzeImageOnUpload`**
- 트리거: Storage 파일 업로드
- 기능: 이미지 분석 실행
- 리전: asia-northeast3

**`continueCritique`**
- 트리거: HTTP POST `/continueCritique`
- 기능: AI 챗봇 대화 세션 지속
- 요청: `{ sessionId, userMessage, context: { userId, analysisId } }`
- 응답: `{ success, sessionId, hypotheses, summary, nextSteps }`

**`extractColorPalette`**
- 트리거: HTTP POST `/extractColorPalette`
- 기능: 색상 팔레트 추출
- 요청: `{ imageUrl, maxColors: 10 }`
- 응답: `{ success, colorPalette: [{ hex, rgb, percentage }] }`

**`extractKeywords`**
- 트리거: HTTP POST `/extractKeywords`
- 기능: 연관 키워드 추출
- 요청: `{ analysisId }`
- 응답: `{ success, keywords: string[] }`

**`detectObjects`**
- 트리거: HTTP POST `/detectObjects`
- 기능: 객체 감지
- 요청: `{ imageUrl }`
- 응답: `{ success, objects: [{ name, confidence, boundingBox }] }`

**`archiveAnalysis`**
- 트리거: HTTP POST `/archiveAnalysis`
- 기능: 분석 결과 아카이빙
- 요청: `{ analysisId, folderId?, tags?, notes? }`
- 응답: `{ success, archiveId }`

#### 8.1.2 검색 관련 API

**`searchWithFilters`**
- 트리거: HTTP POST `/searchWithFilters`
- 기능: 필터를 적용한 검색
- 요청: `{ query?, imageUrl?, diversityLevel, styleReflectionLevel, keywords[] }`
- 응답: `{ success, results: [{ analysisId, imageUrl, similarityScore, reason, metrics }] }`

**`createBoard`**
- 트리거: HTTP POST `/createBoard`
- 기능: 보드 생성
- 요청: `{ name, description?, category?, isPublic: false }`
- 응답: `{ success, boardId }`

**`saveToBoard`**
- 트리거: HTTP POST `/saveToBoard`
- 기능: 이미지를 보드에 저장
- 요청: `{ boardId, analysisId }`
- 응답: `{ success }`

#### 8.1.3 마이 페이지 관련 API

**`getRepresentativeStyle`**
- 트리거: HTTP GET `/getRepresentativeStyle?userId={userId}`
- 기능: 사용자의 대표 스타일 조회
- 응답: `{ success, currentStyle: { styleId, imageUrl, metrics, description }, timeline: [] }`

**`compareStyles`**
- 트리거: HTTP POST `/compareStyles`
- 기능: 현재와 과거 스타일 비교 분석
- 요청: `{ currentStyleId, pastStyleId }`
- 응답: `{ success, comparison: { metricsDiff, textAnalysis, improvements, maintainedStrengths } }`

**`createStyleFolder`**
- 트리거: HTTP POST `/createStyleFolder`
- 기능: 스타일 폴더 생성
- 요청: `{ name, description?, representativeImageId? }`
- 응답: `{ success, folderId }`

**`updateProfileImage`**
- 트리거: HTTP POST `/updateProfileImage`
- 기능: 프로필 이미지 업로드 및 업데이트
- 요청: FormData (multipart/form-data)
- 응답: `{ success, imageUrl }`

**`generateGrowthReport`**
- 트리거: HTTP POST `/generateGrowthReport`
- 기능: 사용자별 성장 리포트 생성
- 요청: `{ userId, period: "weekly" | "monthly", startDate?, endDate? }`
- 응답: `{ success, reportId }`

---

## 🧮 9. 알고리즘 및 로직 명세

### 9.1 MultiLLM 분석 알고리즘

**TSD 참조**: Section 4.1

**병렬 실행 전략**:
- Promise.allSettled 사용하여 3개 LLM 병렬 실행
- 일부 실패해도 계속 진행
- 결과 통합 알고리즘으로 평균값 계산

**결과 통합**:
- 각 메트릭의 평균값 계산
- 인사이트 중복 제거
- 모델별 비교 데이터 생성

### 9.2 메트릭 정규화 알고리즘

**TSD 참조**: Section 4.3

**정규화 타입**:
- 선형 정규화: 레이아웃 관련 메트릭
- 로그 정규화: 타이포그래피 폰트 크기
- WCAG 대비율 정규화: 색상 대비
- 비율 정규화: 그리드, 색상 조화
- 카운트 정규화: 브레이크포인트, 팔레트

### 9.3 대표 스타일 선정 알고리즘

**TSD 참조**: Section 4.17

**선정 로직**:
1. 최근 10개 분석 결과 조회
2. 메트릭 평균값 계산
3. 가장 유사한 분석 결과 선정
4. `representativeStyles` 컬렉션에 저장

### 9.4 색상 팔레트 추출 알고리즘

**TSD 참조**: Section 4.13

**추출 방법**:
- K-means 클러스터링 또는 AI 모델 활용
- 각 색상의 비율 계산
- 비율 기준 내림차순 정렬
- 최대 10개 색상 반환

### 9.5 연관 키워드 추출 알고리즘

**TSD 참조**: Section 4.14

**추출 방법**:
- AI 모델 프롬프트에 키워드 추출 요청
- 분석 결과의 인사이트 및 요약에서 키워드 추출
- 최대 20개 키워드 반환

---

## 📊 10. 구현 계획

### 10.1 우선순위 분류

**SRD 참조**: Section 5.2

#### P0 (Critical) - 즉시 해결 필요
- **Gap-NFR-2.1**: 인증 시스템 부재 (2주)

#### P1 (High) - 단기 해결 필요 (1-2개월)
- **Gap-1.3.1**: 사용자별 DNA 프로파일링 부재 (3주)
- **Gap-1.4.1**: 가독성 평가 체계 부재 (2주)
- **Gap-2.2.1**: 성장 리포트 생성 시스템 부재 (3주)
- **Gap-2.4.1**: 사용자별 시계열 추적 부재 (2주)
- **Gap-3.1.1**: 검색 시스템 부재 (6주)
- **Gap-3.2.1**: 추천 시스템 부재 (8주)

#### P2 (Medium) - 중기 해결 필요 (3-6개월)
- **Gap-1.2.1**: 색상 팔레트 추출 기능 부재 (2주)
- **Gap-1.4.2**: 시선유도 분석 기능 부재 (6주)
- **Gap-1.4.3**: 피드백 원리 적용 부재 (3주)

#### P3 (High) - 장기 해결 필요 (6개월 이상)
- **Gap-2.5.2**: 커뮤니티 피드백 시스템 부재 (8주)
- **Gap-3.3.1**: 트렌드 수집 시스템 부재 (12주)

### 10.2 Phase별 구현 계획

#### Phase 1: 핵심 기능 구현 (1-2개월)
- 인증 시스템 통합
- 이미지 업로드 및 분석
- AI 챗봇 세션
- 기본 검색 기능
- 프로필 관리

#### Phase 2: 고급 기능 구현 (3-4개월)
- DNA 프로파일링
- 성장 리포트
- 스타일 추적
- 갤러리 관리
- 고급 검색 필터

#### Phase 3: 최적화 및 확장 (5-6개월)
- 시선유도 분석
- 트렌드 수집 시스템
- 커뮤니티 피드백
- 성능 최적화

### 10.3 마일스톤 정의

| 마일스톤 | 목표 일자 | 완료 기준 |
|---------|----------|----------|
| **M1: 프로덕션 보안 완료** | 2025.02.28 | Firebase Authentication 통합 및 보안 규칙 강화 완료 |
| **M2: 핵심 기능 완성** | 2025.04.30 | 이미지 업로드, 분석, 챗봇, 기본 검색 구현 완료 |
| **M3: 베타 테스트 준비** | 2025.06.30 | 프로필 관리, 스타일 추적, 갤러리 관리 구현 완료 |
| **M4: 검색 시스템 런칭** | 2025.08.31 | AI 기반 검색 시스템 및 필터 구현 완료 |
| **M5: 고급 기능 런칭** | 2025.10.31 | DNA 프로파일링, 성장 리포트, 트렌드 수집 구현 완료 |

---

## 📈 11. 성공 지표

### 11.1 비즈니스 지표

**BRD 참조**: Section 2.2

- **효율성 향상**: 최소 30% 이상의 사용자 작업 효율 향상
- **성장 인지도**: 성장 자기 인지도 개선
- **사용자 만족도**: UX 및 UI의 직관성 강화로 90% 이상 사용자 만족 달성 목표

### 11.2 성능 지표

**SRD 참조**: Section 3.1

- **이미지 분석 응답 시간**: 평균 30초 이내, P95 60초 이내
- **페이지 로딩 시간**: 초기 로딩 3초 이내, 페이지 전환 1초 이내
- **검색 응답 시간**: 텍스트 검색 2초 이내, 이미지 검색 5초 이내
- **시스템 가동률**: 99.5% 이상

---

## ⚠️ 12. 리스크 및 제약사항

### 12.1 기술적 리스크

**BRD 참조**: Section 9.1

- **AI 성능 및 데이터 품질 문제**: 초기 AI 모델 학습에 필요한 대규모 품질 데이터 확보 어려움
- **시스템 및 인프라 안정성**: 클라우드 서버 및 GPU 자원 비용과 안정성 관리 부담

**대응 방안**:
- 데이터 품질 관리 체계 구축
- 지속적인 모델 성능 모니터링 및 개선
- 인프라 모니터링 및 자동 스케일링 설정

### 12.2 사용자 및 시장 관련 리스크

**BRD 참조**: Section 9.2

- **사용자 확보 및 유지의 어려움**: 타겟 사용자의 낮은 초기 지불 의향
- **수익 모델의 불확실성**: 포트폴리오 분석 기반 수익 모델의 시장 검증 부족

**대응 방안**:
- 프리미엄 기능 기반 차별화 전략
- 사용자 온보딩 프로세스 최적화
- 다양한 수익 모델 검증 및 테스트

---

## 📚 13. 부록

### 13.1 용어 정의

- **디자인 DNA**: 사용자의 디자인 스타일을 수치화한 프로파일
- **5축 메트릭**: Layout, Typography, Color, Components, Form Language
- **대표 스타일**: 사용자의 현재 디자인 스타일을 가장 잘 나타내는 이미지
- **보드**: 사용자가 생성한 이미지 컬렉션
- **스타일 폴더**: 아카이빙된 분석 결과를 정리하는 폴더
- **트렌드**: 레거시미디어, REDDOT 등 수상작품, 담론형성 디자인 작품, 긍정적 평가를 받는 디자인 작품
- **MultiLLM**: 여러 AI 언어 모델을 병렬로 실행하여 결과를 비교 분석하는 시스템

### 13.2 참조 문서

- **BRD.md**: 비즈니스 요구사항 정의 (버전 1.2)
- **dys_FRD.md**: 기능 요구사항 정의 (버전 1.2)
- **dys_SRD.md**: 시스템 요구사항 정의 (버전 1.2)
- **dys_TSD.md**: 기술 명세서 (버전 1.2)

### 13.3 변경 이력

| 버전 | 날짜 | 변경 내용 | 작성자 |
|------|------|-----------|--------|
| 1.0 | 2025.01.19 | 초기 PRD 문서 작성 | dys 팀 |

---

**문서 관리**: 이 문서는 dysproto 프로젝트의 제품 요구사항을 정의하며, BRD, FRD, SRD, TSD를 통합한 최종 명세서입니다. 변경 사항은 모든 이해관계자와 공유되어야 합니다.

