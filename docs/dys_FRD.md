# 📋 dys FRD (Functional Requirements Document)

**작성일자**: 2025년 11월 4일  
**문서 버전**: 1.3  
**상태**: 초기 기능 요구사항 정의 (인프라 설정 추가, Phase 0 완료 반영, 구현 상태 정정, 프로젝트명 통일)  
**참조 문서**: BRD.md (버전 1.2), dys_SRD.md (버전 1.3), dys_TSD.md (버전 1.3)

---

## 📌 0. 문서 정보

| 항목 | 내용 |
|------|------|
| **프로젝트명** | dysproto (Design Intelligence Support System) |
| **문서 유형** | Functional Requirements Document (FRD) |
| **관련 문서** | BRD.md (비즈니스 요구사항), dys_SRD.md (시스템 요구사항), dys_TSD.md (기술 명세서) |
| **작성 목적** | BRD의 비즈니스 요구사항을 기능 관점에서 상세화하고, 사용자 스토리, 사용 사례, 시나리오를 통한 기능 명세 제공 |

---

## 🎯 1. 개요 및 목적

### 1.1 문서 목적

본 FRD는 **dysproto (Design Intelligence Support System)**의 기능 요구사항을 상세하게 정의합니다. 이 문서는:

- BRD의 비즈니스 요구사항을 기능 관점에서 상세화
- 사용자 스토리, 사용 사례, 시나리오를 통한 기능 명세
- SRD의 기능 요구사항을 사용자 중심 관점에서 재구성
- 새로운 IA 구조(업로드 → 서칭 → 마이페이지 → 설정)에 따른 기능별 상세 명세

### 1.2 문서 범위

**포함 범위**:
- 사용자 페르소나 및 역할 정의
- 기능별 사용자 스토리 및 수용 기준
- 기능별 사용 사례 (Use Cases)
- 상세 기능 명세 (입력/출력, 처리 로직, 비즈니스 규칙)
- 사용자 시나리오 (정상/예외/에지 케이스)
- UI/UX 요구사항
- 기능 간 상호작용 및 플로우
- 예외 상황 및 에러 처리 요구사항
- 성능 및 사용성 요구사항

**제외 범위**:
- 기술적 구현 상세 (TSD에서 다룸)
- 시스템 아키텍처 (SRD에서 다룸)
- 비즈니스 전략 및 목표 (BRD에서 다룸)

### 1.3 참조 문서

- **BRD.md**: 비즈니스 요구사항 정의
- **dys_SRD.md**: 시스템 요구사항 정의 (기능 요구사항 섹션)
- **dys_TSD.md**: 기술 명세서 (컴포넌트 설계 섹션)
- **VERIFICATION_REPORT.md**: 검증 보고서

### 1.4 인프라 정보

- **Storage Bucket**: `gs://dysproto.firebasestorage.app`
- **Storage 리전**: `us-east-1` ⚠️ (주의: asia-northeast3 아님)
- **Firestore 데이터베이스**: `dysproto`
- **Firestore 리전**: `asia-northeast3`
- **Firestore 컬렉션**: `analyses` (초기 컬렉션)
- **Authentication**: 익명 인증 활성화 (Phase 0)
- **Cloud Functions 리전**: `asia-northeast3`

---

## 👥 2. 사용자 역할 및 페르소나

### 2.1 사용자 역할 정의

**BRD 참조**: Section 1.3, Section 4

#### 2.1.1 일반 사용자 (Regular User)

**역할**: 기본 기능을 사용하는 디자이너

**권한**:
- 이미지 업로드 및 분석
- 검색 기능 사용
- 개인 프로필 관리
- 기본 설정 관리

**특징**:
- 무료 플랜 사용자
- 기본 분석 기능 사용
- 제한된 저장 공간

#### 2.1.2 프리미엄 사용자 (Premium User)

**역할**: 고급 기능을 사용하는 디자이너

**권한**:
- 모든 일반 사용자 권한
- 고급 분석 기능 사용
- 무제한 저장 공간
- 우선 지원

**특징**:
- 유료 플랜 사용자
- 고급 분석 및 리포트 기능 사용
- 우선 처리

### 2.2 사용자 페르소나

**BRD 참조**: Section 1.3 (타겟 사용자)

#### 페르소나 1: 초보 디자이너 "김디자인"

**기본 정보**:
- 이름: 김디자인
- 나이: 22세
- 직업: 디자인 전공 대학생 (3학년)
- 경력: 1년 미만

**목표**:
- 포트폴리오 품질 향상
- 객관적인 피드백을 통한 성장
- 디자인 스타일 정립

**페인 포인트**:
- 주관적인 평가에 대한 불만
- 개선 방향을 모르는 상황
- 참고 자료 찾기의 어려움

**사용 패턴**:
- 주 2-3회 포트폴리오 업로드
- 분석 결과를 바탕으로 개선
- 검색 기능을 통한 참고 자료 수집

**기술 수준**:
- 디자인 도구 사용 능숙
- 온라인 서비스 사용 경험 많음
- AI 도구 사용 경험 적음

#### 페르소나 2: 주니어 디자이너 "이포트폴리오"

**기본 정보**:
- 이름: 이포트폴리오
- 나이: 25세
- 직업: 주니어 그래픽 디자이너
- 경력: 2년

**목표**:
- 포트폴리오 다양성 확보
- 시장 트렌드 파악
- 전문성 강화

**페인 포인트**:
- 시간 부족으로 인한 분석 어려움
- 트렌드 파악의 어려움
- 성장 추적의 어려움

**사용 패턴**:
- 주 1-2회 포트폴리오 업로드
- 주기적 성장 리포트 확인
- 트렌드 분석 기능 활용

**기술 수준**:
- 디자인 도구 전문가
- 온라인 서비스 활용 능숙
- 데이터 분석에 관심 많음

#### 페르소나 3: 취업 준비생 "박성장"

**기본 정보**:
- 이름: 박성장
- 나이: 23세
- 직업: 디자인 전공 대학생 (4학년, 취업 준비 중)
- 경력: 인턴십 경험

**목표**:
- 취업용 포트폴리오 완성
- 객관적 평가 자료 확보
- 면접 준비 자료 수집

**페인 포인트**:
- 포트폴리오 평가 기준 불명확
- 개선점 파악 어려움
- 경쟁력 있는 포트폴리오 제작 필요

**사용 패턴**:
- 매일 포트폴리오 업로드 및 분석
- 분석 결과를 바탕으로 빠른 개선
- 검색 기능을 통한 레퍼런스 수집

**기술 수준**:
- 디자인 도구 능숙
- 온라인 서비스 적극 활용
- 빠른 학습 능력

### 2.3 사용자 여정 맵

**새로운 IA 구조 기반 사용자 여정**:

```
1. 온보딩
   ↓
2. 업로드 및 분석
   - 이미지 업로드
   - 분석 실행
   - 결과 확인
   ↓
3. 서칭
   - 검색 실행
   - 결과 탐색
   - 저장
   ↓
4. 마이 페이지
   - 프로필 확인
   - 스타일 추적
   - 갤러리 관리
   ↓
5. 설정
   - 계정 관리
   - 보안 설정
   - 정보 확인
```

**각 단계별 사용자 목표**:

| 단계 | 사용자 목표 | 주요 행동 |
|------|------------|----------|
| 온보딩 | 서비스 이해 및 시작 | 가이드 확인, 계정 생성 |
| 업로드 및 분석 | 포트폴리오 분석 | 이미지 업로드, 분석 결과 확인 |
| 서칭 | 참고 자료 수집 | 검색, 결과 확인, 저장 |
| 마이 페이지 | 성장 추적 | 프로필 확인, 스타일 비교 |
| 설정 | 개인화 | 계정 관리, 알림 설정 |

---

## 📋 목차

1. [사용자 역할 및 페르소나](#2-사용자-역할-및-페르소나)
2. [기능 1: 업로드 및 분석](#3-기능-1-업로드-및-분석-upload--analysis)
3. [기능 2: 서칭](#4-기능-2-서칭-searching)
4. [기능 3: 마이 페이지](#5-기능-3-마이-페이지-my-page)
5. [기능 4: 설정](#6-기능-4-설정-settings)
6. [기능 간 상호작용 및 플로우](#7-기능-간-상호작용-및-플로우)
7. [예외 상황 및 에러 처리](#8-예외-상황-및-에러-처리)
9. [성능 및 사용성 요구사항](#9-성능-및-사용성-요구사항)

---

## 3. 기능 1: 업로드 및 분석 (Upload & Analysis)

**BRD 참조**: Section 3.1  
**SRD 참조**: Section 2.1  
**사용자 여정**: 이미지 업로드 → 분석 실행 → 결과 확인

### 3.1 개요

사용자가 포트폴리오 이미지를 업로드하고, AI 기반 분석을 통해 디자인 스타일을 객관적으로 평가받는 기능입니다.

**주요 기능**:
- 이미지 업로드 (드래그 앤 드롭, 파일 선택)
- AI 기반 분석 실행
- 분석 결과 표시 (5축 메트릭, AI 요약, 색상 팔레트, 연관 키워드 등)
- 디자인 법칙 기반 평가

**기술 명세**:
```typescript
// 프론트엔드: 이미지 업로드
// Storage 경로: gs://dysproto.firebasestorage.app/users/{userId}/analyses/{timestamp}_{filename}
// Storage 리전: us-east-1
const storageRef = ref(storage, `users/${userId}/analyses/${timestamp}_${fileName}`);
await uploadBytes(storageRef, imageFile);

// Firestore 경로: dysproto 데이터베이스의 image 컬렉션
// 데이터베이스: dysproto
// 리전: asia-northeast3
// 컬렉션: analyses
const docRef = doc(db, 'image', docId);
await setDoc(docRef, { /* 분석 요청 데이터 */ });

// 백엔드: Cloud Function 트리거
// Functions 리전: asia-northeast3
onObjectFinalized: (object) => {
  if (object.contentType.startsWith("image/") && 
      object.name.startsWith("users/")) {
    // 분석 시작
    // 결과 저장: Firestore dysproto/image 컬렉션
  }
}
```

---

### 3.2 사용자 스토리

#### US-1.1: 이미지 업로드 (드래그 앤 드롭)

**스토리**:
> As a 디자이너, I want to drag and drop my portfolio image to upload it, so that I can quickly upload images without clicking through file dialogs.

**수용 기준**:
- [ ] 사용자는 이미지 파일을 드래그하여 업로드 영역에 드롭할 수 있어야 함
- [ ] 드롭 영역에 마우스를 올리면 시각적 피드백이 제공되어야 함
- [ ] 드롭된 파일이 즉시 업로드되어야 함
- [ ] 지원하지 않는 파일 형식일 경우 명확한 에러 메시지가 표시되어야 함
- [ ] 파일 크기가 5MB를 초과할 경우 명확한 에러 메시지가 표시되어야 함

**우선순위**: P1 (High)  
**SRD 참조**: FR-1.1, Gap-1.1.1  
**구현 상태**: ❌ 미구현 (Phase 1 예정)  
**구현 일자**: 미정

#### US-1.2: 이미지 업로드 (파일 선택)

**스토리**:
> As a 디자이너, I want to select an image file from my device to upload it, so that I can upload images using the traditional file selection method.

**수용 기준**:
- [ ] 사용자는 파일 선택 버튼을 클릭하여 이미지 파일을 선택할 수 있어야 함
- [ ] 파일 선택 다이얼로그가 열려야 함
- [ ] 선택된 파일이 즉시 업로드되어야 함
- [ ] 업로드 진행 상황이 표시되어야 함

**우선순위**: P0 (Critical)  
**SRD 참조**: FR-1.1  
**구현 상태**: ❌ 미구현 (Phase 1 예정)  
**구현 일자**: 미정

#### US-1.3: 파일 포맷 가이드 확인

**스토리**:
> As a 디자이너, I want to see supported file formats and size limits before uploading, so that I can prepare the correct file format.

**수용 기준**:
- [ ] 업로드 영역에 지원 파일 형식(JPEG, PNG, WebP)이 표시되어야 함
- [ ] 최대 파일 크기(5MB)가 표시되어야 함
- [ ] 가이드 텍스트가 명확하고 읽기 쉬워야 함

**우선순위**: P2 (Medium)  
**SRD 참조**: FR-1.1  
**구현 상태**: ❌ 미구현 (Phase 1 예정)  
**구현 일자**: 미정

#### US-1.4: 서비스 가이드 확인

**스토리**:
> As a 첫 방문 사용자, I want to see a guide explaining how to use the service, so that I can quickly understand the main features.

**수용 기준**:
- [ ] 가이드 버튼이 업로드 페이지에 표시되어야 함
- [ ] 가이드 버튼 클릭 시 핀 형태의 가이드 오버레이가 표시되어야 함
- [ ] 첫 방문 사용자에게 자동으로 가이드가 표시되는 옵션이 있어야 함
- [ ] 가이드는 주요 기능(업로드, 분석, 결과 확인)을 설명해야 함

**우선순위**: P2 (Medium)  
**SRD 참조**: FR-1.1, Gap-1.1.2  
**구현 상태**: ❌ 미구현 (Phase 1 예정)  
**구현 일자**: 미정

#### US-1.5: 분석 실행

**스토리**:
> As a 디자이너, I want to start analysis of my uploaded image with a button click, so that I can control when the analysis begins.

**수용 기준**:
- [ ] 업로드 완료 후 분석 버튼이 표시되어야 함
- [ ] 분석 버튼 클릭 시 분석이 시작되어야 함
- [ ] 분석 중 상태가 명확하게 표시되어야 함 (로딩 인디케이터)
- [ ] 분석 완료 시 결과가 자동으로 표시되어야 함

**우선순위**: P2 (Medium)  
**SRD 참조**: FR-1.2, Gap-1.2.1  
**구현 상태**: ❌ 미구현 (Phase 1 예정)  
**구현 일자**: 미정

#### US-1.6: 분석 결과 확인 (5축 메트릭)

**스토리**:
> As a 디자이너, I want to see detailed analysis results with 5-axis metrics, so that I can understand my design strengths and weaknesses objectively.

**수용 기준**:
- [ ] 5축 메트릭(Layout, Typography, Color, Components, Form Language)이 표시되어야 함
- [ ] 각 메트릭별 점수(0-100)가 표시되어야 함
- [ ] 전체 점수(Overall Score)가 표시되어야 함
- [ ] 메트릭이 시각적으로 표현되어야 함 (차트, 게이지 등)

**우선순위**: P0 (Critical)  
**SRD 참조**: FR-1.3  
**구현 상태**: ❌ 미구현 (Phase 1 예정)  
**구현 일자**: 미정

#### US-1.7: AI 요약 확인

**스토리**:
> As a 디자이너, I want to see an AI-generated summary of my design analysis, so that I can quickly understand the key points without reading all details.

**수용 기준**:
- [ ] 분석 결과에 AI 요약 텍스트가 표시되어야 함
- [ ] 요약은 자연어로 작성되어야 함
- [ ] 요약은 주요 강점과 개선점을 포함해야 함

**우선순위**: P0 (Critical)  
**SRD 참조**: FR-1.3  
**구현 상태**: ❌ 미구현 (Phase 1 예정)  
**구현 일자**: 미정

#### US-1.8: 색상 팔레트 확인

**스토리**:
> As a 디자이너, I want to see the color palette extracted from my design, so that I can understand the color scheme I used.

**수용 기준**:
- [ ] 분석 결과에 색상 팔레트가 표시되어야 함
- [ ] 각 색상의 HEX 코드가 표시되어야 함
- [ ] 각 색상의 RGB 값이 표시되어야 함
- [ ] 색상 팔레트가 시각적으로 표현되어야 함

**우선순위**: P1 (High)  
**SRD 참조**: FR-1.3, Gap-1.2.1  
**구현 상태**: ❌ 미구현 (Phase 1 예정)  
**구현 일자**: 미정

#### US-1.9: 연관 키워드 확인

**스토리**:
> As a 디자이너, I want to see keywords related to my design, so that I can use them for searching similar designs.

**수용 기준**:
- [ ] 분석 결과에 연관 키워드가 태그 형태로 표시되어야 함
- [ ] 키워드를 클릭하면 관련 검색 결과로 이동할 수 있어야 함
- [ ] 키워드는 최대 20개까지 표시되어야 함

**우선순위**: P1 (High)  
**SRD 참조**: FR-1.3, Gap-1.3.1  
**구현 상태**: ❌ 미구현 (Phase 1 예정)  
**구현 일자**: 미정

#### US-1.10: 분석 결과 아카이빙

**스토리**:
> As a 디자이너, I want to archive my analysis results, so that I can save them to my style gallery for future reference.

**수용 기준**:
- [ ] 분석 결과에 아카이빙 버튼이 표시되어야 함
- [ ] 아카이빙 버튼 클릭 시 스타일 갤러리에 자동 저장되어야 함
- [ ] 아카이빙 완료 시 확인 메시지가 표시되어야 함

**우선순위**: P1 (High)  
**SRD 참조**: FR-1.3, Gap-1.3.4  
**구현 상태**: ❌ 미구현 (Phase 1 예정)  
**구현 일자**: 미정

---

### 3.3 사용 사례 (Use Cases)

#### UC-1.1: 이미지 업로드 (드래그 앤 드롭)

**액터**: 디자이너  
**전제 조건**: 사용자가 로그인되어 있음  
**기본 흐름**:
1. 사용자가 업로드 페이지에 접속
2. 사용자가 이미지 파일을 드래그하여 업로드 영역에 드롭
3. 시스템이 파일 형식 및 크기 검증
4. 시스템이 파일을 Firebase Storage에 업로드
5. 시스템이 업로드 완료 메시지 표시
6. 시스템이 분석 버튼 표시

**대안 흐름**:
- 3a. 파일 형식이 지원되지 않는 경우
  - 3a.1. 시스템이 에러 메시지 표시
  - 3a.2. 사용 사례 종료
- 3b. 파일 크기가 5MB를 초과하는 경우
  - 3b.1. 시스템이 에러 메시지 표시
  - 3b.2. 사용 사례 종료

**예외 흐름**:
- 네트워크 오류 발생 시 에러 메시지 표시 및 재시도 옵션 제공

**사후 조건**: 이미지가 업로드되고 분석 버튼이 표시됨

**SRD 참조**: FR-1.1

#### UC-1.2: 이미지 업로드 (파일 선택)

**액터**: 디자이너  
**전제 조건**: 사용자가 로그인되어 있음  
**기본 흐름**:
1. 사용자가 업로드 페이지에 접속
2. 사용자가 파일 선택 버튼 클릭
3. 시스템이 파일 선택 다이얼로그 표시
4. 사용자가 이미지 파일 선택
5. 시스템이 파일 형식 및 크기 검증
6. 시스템이 파일을 Firebase Storage에 업로드
7. 시스템이 업로드 진행 상황 표시
8. 시스템이 업로드 완료 메시지 표시
9. 시스템이 분석 버튼 표시

**대안 흐름**: UC-1.1과 동일

**예외 흐름**: UC-1.1과 동일

**사후 조건**: 이미지가 업로드되고 분석 버튼이 표시됨

**SRD 참조**: FR-1.1

#### UC-1.3: 분석 실행

**액터**: 디자이너  
**전제 조건**: 이미지가 업로드되어 있음  
**기본 흐름**:
1. 사용자가 분석 버튼 클릭
2. 시스템이 분석 상태를 "analyzing"으로 변경
3. 시스템이 로딩 인디케이터 표시
4. 시스템이 MultiLLM을 통한 분석 실행
5. 시스템이 분석 결과를 Firestore에 저장
6. 시스템이 분석 상태를 "completed"로 변경
7. 시스템이 분석 결과 표시

**대안 흐름**:
- 4a. 분석 실패 시
  - 4a.1. 시스템이 분석 상태를 "failed"로 변경
  - 4a.2. 시스템이 에러 메시지 표시
  - 4a.3. 사용 사례 종료

**예외 흐름**:
- 네트워크 오류 발생 시 에러 메시지 표시 및 재시도 옵션 제공

**사후 조건**: 분석 결과가 표시됨

**SRD 참조**: FR-1.2

#### UC-1.4: 분석 결과 확인

**액터**: 디자이너  
**전제 조건**: 분석이 완료되어 있음  
**기본 흐름**:
1. 사용자가 분석 결과 페이지 확인
2. 시스템이 5축 메트릭 표시
3. 시스템이 AI 요약 표시
4. 시스템이 색상 팔레트 표시 (있는 경우)
5. 시스템이 연관 키워드 표시 (있는 경우)
6. 사용자가 각 섹션을 펼쳐 상세 내용 확인

**대안 흐름**:
- 4a. 색상 팔레트 추출 실패 시
  - 4a.1. 색상 팔레트 섹션 숨김
- 5a. 연관 키워드 추출 실패 시
  - 5a.1. 연관 키워드 섹션 숨김

**예외 흐름**: 없음

**사후 조건**: 사용자가 분석 결과를 확인함

**SRD 참조**: FR-1.3

#### UC-1.5: 색상 팔레트 확인

**액터**: 디자이너  
**전제 조건**: 분석이 완료되고 색상 팔레트가 추출되어 있음  
**기본 흐름**:
1. 사용자가 분석 결과 페이지에서 색상 팔레트 섹션 확인
2. 시스템이 색상 팔레트를 시각적으로 표시
3. 사용자가 특정 색상에 마우스를 올림
4. 시스템이 해당 색상의 HEX 코드 및 RGB 값 표시
5. 사용자가 색상 코드를 클립보드에 복사

**대안 흐름**: 없음

**예외 흐름**: 없음

**사후 조건**: 사용자가 색상 팔레트를 확인함

**SRD 참조**: FR-1.3, Gap-1.2.1

#### UC-1.6: 연관 키워드 확인 및 검색 이동

**액터**: 디자이너  
**전제 조건**: 분석이 완료되고 연관 키워드가 추출되어 있음  
**기본 흐름**:
1. 사용자가 분석 결과 페이지에서 연관 키워드 섹션 확인
2. 시스템이 키워드를 태그 형태로 표시
3. 사용자가 특정 키워드 클릭
4. 시스템이 검색 페이지로 이동
5. 시스템이 해당 키워드로 검색 실행
6. 시스템이 검색 결과 표시

**대안 흐름**: 없음

**예외 흐름**: 없음

**사후 조건**: 사용자가 키워드 기반 검색 결과를 확인함

**SRD 참조**: FR-1.3, Gap-1.3.1

#### UC-1.7: 분석 결과 아카이빙

**액터**: 디자이너  
**전제 조건**: 분석이 완료되어 있음  
**기본 흐름**:
1. 사용자가 분석 결과 페이지에서 아카이빙 버튼 클릭
2. 시스템이 아카이빙 확인 다이얼로그 표시 (선택사항)
3. 사용자가 확인 클릭
4. 시스템이 분석 결과를 `archivedAnalyses` 컬렉션에 저장
5. 시스템이 스타일 갤러리에 자동 추가
6. 시스템이 아카이빙 완료 메시지 표시

**대안 흐름**:
- 3a. 사용자가 취소 클릭
  - 3a.1. 아카이빙 취소
  - 3a.2. 사용 사례 종료

**예외 흐름**:
- 저장 실패 시 에러 메시지 표시 및 재시도 옵션 제공

**사후 조건**: 분석 결과가 아카이빙되고 스타일 갤러리에 추가됨

**SRD 참조**: FR-1.3, Gap-1.3.4

---

### 3.4 상세 기능 명세

#### 3.4.1 이미지 업로드 기능

**입력 데이터 구조**:
```json
{
  "file": File,
  "userId": string,
  "metadata": {
    "fileName": string,
    "fileSize": number,
    "fileType": string
  }
}
```

**출력 데이터 구조**:
```json
{
  "success": boolean,
  "filePath": string,
  "analysisId": string,
  "message": string
}
```

**처리 로직**:
1. 파일 형식 검증 (JPEG, PNG, WebP만 허용)
2. 파일 크기 검증 (최대 5MB)
3. Firebase Storage에 업로드 (`users/{userId}/analyses/{timestamp}_{fileName}`)
4. Firestore에 분석 요청 문서 생성 (`analyses/{analysisId}`)
5. 상태를 "analyzing"으로 설정

**비즈니스 규칙**:
- 파일 형식은 `image/*` MIME 타입이어야 함
- 파일 크기는 5MB를 초과할 수 없음
- 파일명은 특수 문자를 제거하여 안전하게 처리해야 함

**검증 규칙**:
- 파일 형식: `image/jpeg`, `image/png`, `image/webp`
- 파일 크기: 0 < size <= 5MB
- 파일명: 최대 255자, 특수 문자 제거

**SRD 참조**: FR-1.1

#### 3.4.2 분석 실행 기능

**입력 데이터 구조**:
```json
{
  "analysisId": string,
  "imageUrl": string,
  "userId": string
}
```

**출력 데이터 구조**:
```json
{
  "success": boolean,
  "analysisResult": {
    "metrics": {
      "layout": number,
      "typography": number,
      "color": number,
      "components": number,
      "formLanguage": number
    },
    "overallScore": number,
    "summary": string,
    "strengths": string[],
    "improvements": string[],
    "insights": Array<{
      "type": "strength" | "weakness",
      "title": string,
      "description": string,
      "recommendation": string
    }>
  }
}
```

**처리 로직**:
1. MultiLLM 분석 엔진 호출
2. 5축 메트릭 계산
3. AI 요약 생성
4. 강점 및 개선점 도출
5. Firestore에 결과 저장
6. 상태를 "completed"로 변경

**비즈니스 규칙**:
- 분석은 최대 60초 내에 완료되어야 함
- 분석 실패 시 상태를 "failed"로 변경하고 에러 메시지 저장
- 분석 결과는 실시간으로 업데이트되어야 함

**검증 규칙**:
- 각 메트릭 점수: 0 <= score <= 100
- 전체 점수: 0 <= overallScore <= 100
- 요약 텍스트: 최대 2000자

**SRD 참조**: FR-1.2

#### 3.4.3 색상 팔레트 추출 기능

**입력 데이터 구조**:
```json
{
  "imageUrl": string,
  "maxColors": number
}
```

**출력 데이터 구조**:
```json
{
  "success": boolean,
  "colorPalette": Array<{
    "hex": string,
    "rgb": {
      "r": number,
      "g": number,
      "b": number
    },
    "percentage": number
  }>
}
```

**처리 로직**:
1. 이미지 픽셀 데이터 추출
2. K-means 클러스터링 또는 AI 모델을 통한 색상 추출
3. 각 색상의 비율 계산
4. 비율 기준 내림차순 정렬
5. 최대 색상 수만큼 반환

**비즈니스 규칙**:
- 최대 색상 수: 10개
- 색상 비율 합계: 100%
- HEX 코드 형식: #RRGGBB

**검증 규칙**:
- maxColors: 1 <= maxColors <= 10
- 각 색상의 RGB 값: 0 <= r,g,b <= 255
- 각 색상의 비율: 0 < percentage <= 100

**SRD 참조**: FR-1.3, Gap-1.2.1

---

### 3.5 사용자 시나리오

#### 시나리오 1: 정상 흐름 - 이미지 업로드 및 분석

**Given**: 사용자 "김디자인"이 업로드 페이지에 접속함

**When**: 
1. 사용자가 포트폴리오 이미지를 드래그하여 업로드 영역에 드롭
2. 시스템이 파일을 업로드하고 분석 버튼 표시
3. 사용자가 분석 버튼 클릭
4. 시스템이 분석을 실행하고 결과 표시

**Then**:
- 이미지가 성공적으로 업로드됨
- 분석이 완료되고 결과가 표시됨
- 5축 메트릭, AI 요약, 색상 팔레트, 연관 키워드가 모두 표시됨

**SRD 참조**: FR-1.1, FR-1.2, FR-1.3

#### 시나리오 2: 예외 흐름 - 잘못된 파일 형식

**Given**: 사용자 "김디자인"이 업로드 페이지에 접속함

**When**: 
1. 사용자가 PDF 파일을 드래그하여 업로드 영역에 드롭
2. 시스템이 파일 형식 검증

**Then**:
- 시스템이 "지원하지 않는 파일 형식입니다. JPEG, PNG, WebP만 지원합니다." 에러 메시지 표시
- 파일이 업로드되지 않음
- 사용자가 올바른 형식의 파일을 다시 업로드할 수 있음

**SRD 참조**: FR-1.1

#### 시나리오 3: 예외 흐름 - 파일 크기 초과

**Given**: 사용자 "김디자인"이 업로드 페이지에 접속함

**When**: 
1. 사용자가 10MB 크기의 이미지를 드래그하여 업로드 영역에 드롭
2. 시스템이 파일 크기 검증

**Then**:
- 시스템이 "파일 크기가 5MB를 초과합니다. 더 작은 파일을 업로드해주세요." 에러 메시지 표시
- 파일이 업로드되지 않음
- 사용자가 파일을 압축하거나 더 작은 파일을 업로드할 수 있음

**SRD 참조**: FR-1.1

#### 시나리오 4: 예외 흐름 - 분석 실패

**Given**: 사용자 "김디자인"이 이미지를 업로드하고 분석 버튼을 클릭함

**When**: 
1. 시스템이 분석을 실행
2. 네트워크 오류 또는 AI 모델 오류 발생
3. 분석이 실패함

**Then**:
- 시스템이 분석 상태를 "failed"로 변경
- 시스템이 "분석 중 오류가 발생했습니다. 잠시 후 다시 시도해주세요." 에러 메시지 표시
- 사용자가 재시도 버튼을 클릭하여 다시 분석할 수 있음

**SRD 참조**: FR-1.2

#### 시나리오 5: 에지 케이스 - 첫 방문 사용자

**Given**: 사용자 "김디자인"이 처음으로 서비스를 사용함

**When**: 
1. 사용자가 업로드 페이지에 접속
2. 시스템이 첫 방문 사용자임을 감지

**Then**:
- 시스템이 자동으로 가이드 오버레이 표시
- 가이드가 주요 기능(업로드, 분석, 결과 확인)을 설명
- 사용자가 가이드를 닫을 수 있음
- 사용자가 "다시 보지 않기" 옵션을 선택할 수 있음

**SRD 참조**: FR-1.1, Gap-1.1.2

---

### 3.6 UI/UX 요구사항

#### 3.6.1 업로드 페이지 레이아웃

**화면 구성**:
```
┌─────────────────────────────────────┐
│  Header (로고, 네비게이션)          │
├─────────────────────────────────────┤
│                                     │
│  ┌─────────────────────────────┐   │
│  │                             │   │
│  │   드래그 앤 드롭 영역        │   │
│  │   (파일 포맷 가이드 표시)    │   │
│  │                             │   │
│  └─────────────────────────────┘   │
│                                     │
│  [파일 선택] 버튼                   │
│  [가이드] 버튼                      │
│                                     │
└─────────────────────────────────────┘
```

**인터랙션 패턴**:
- 드래그 앤 드롭 영역에 마우스를 올리면 배경색 변경
- 파일을 드래그하면 영역 테두리 강조 표시
- 업로드 중에는 진행률 표시

**피드백 메커니즘**:
- 업로드 완료 시 성공 메시지 표시
- 업로드 실패 시 에러 메시지 표시
- 분석 중에는 로딩 인디케이터 표시

**접근성 요구사항**:
- 키보드로 파일 선택 가능 (Tab + Enter)
- 스크린 리더가 업로드 영역을 인식할 수 있도록 ARIA 레이블 제공
- 색상 대비 WCAG 2.1 AA 준수

**SRD 참조**: FR-1.1

#### 3.6.2 분석 결과 표시 UI 구성

**화면 구성**:
```
┌─────────────────────────────────────┐
│  분석 정보 버튼 (접기/펼치기)       │
├─────────────────────────────────────┤
│  [분석 정보]                        │
│  - 파일명: portfolio.jpg            │
│  - 분석 일시: 2025-11-04 14:30     │
├─────────────────────────────────────┤
│  AI 요약                            │
│  [요약 텍스트...]                   │
├─────────────────────────────────────┤
│  5축 메트릭                         │
│  [차트/게이지 표시]                 │
├─────────────────────────────────────┤
│  색상 팔레트                        │
│  [색상 칩 표시]                     │
├─────────────────────────────────────┤
│  연관 키워드                        │
│  [태그 형태 표시]                   │
├─────────────────────────────────────┤
│  [아카이빙] 버튼                    │
└─────────────────────────────────────┘
```

**인터랙션 패턴**:
- 각 섹션을 클릭하여 펼치기/접기 가능
- 색상 팔레트의 색상을 클릭하면 HEX 코드 복사
- 연관 키워드를 클릭하면 검색 페이지로 이동

**피드백 메커니즘**:
- 아카이빙 완료 시 토스트 메시지 표시
- 색상 코드 복사 시 "복사되었습니다" 메시지 표시

**접근성 요구사항**:
- 키보드로 모든 섹션 접근 가능
- 스크린 리더가 각 메트릭 점수를 읽을 수 있도록 ARIA 레이블 제공

**SRD 참조**: FR-1.3

---

---

## 4. 기능 2: 서칭 (Searching)

**BRD 참조**: Section 3.3  
**SRD 참조**: Section 2.2  
**사용자 여정**: 검색 → 결과 탐색 → 저장

### 4.1 개요

사용자가 텍스트, 이미지, 또는 자신의 디자인 DNA를 기반으로 유사한 디자인 레퍼런스를 검색하고, 결과를 보드에 저장하는 기능입니다.

**주요 기능**:
- 텍스트 검색
- 이미지 검색
- 사용자 스타일 기반 검색
- 카테고리별 필터링
- 검색 결과 상호작용 (보드 저장, 이미지 저장)
- 탐색 제어 (다양성, 스타일 반영률 조절)

---

### 4.2 사용자 스토리

#### US-2.1: 텍스트 검색

**스토리**:
> As a 디자이너, I want to search for design references using keywords, so that I can find similar designs quickly.

**수용 기준**:
- [ ] 사용자는 검색 박스에 키워드를 입력할 수 있어야 함
- [ ] 검색 실행 시 관련 이미지가 표시되어야 함
- [ ] 검색 결과는 유사도 순으로 정렬되어야 함
- [ ] 검색 결과가 없을 경우 적절한 메시지가 표시되어야 함

**우선순위**: P1 (High)  
**SRD 참조**: FR-3.1, Gap-3.1.1  
**구현 상태**: ❌ 미구현 (Phase 1 예정)  
**구현 일자**: 미정

#### US-2.2: 이미지 검색

**스토리**:
> As a 디자이너, I want to upload an image to search for similar designs, so that I can find designs with similar visual elements.

**수용 기준**:
- [ ] 사용자는 이미지를 업로드하여 검색할 수 있어야 함
- [ ] 업로드된 이미지와 유사한 이미지가 검색 결과로 표시되어야 함
- [ ] 유사도 점수가 각 결과에 표시되어야 함
- [ ] 검색 결과는 유사도 순으로 정렬되어야 함

**우선순위**: P1 (High)  
**SRD 참조**: FR-3.1, Gap-3.1.1  
**구현 상태**: ❌ 미구현 (Phase 1 예정)  
**구현 일자**: 미정

#### US-2.3: 사용자 스타일 기반 검색

**스토리**:
> As a 디자이너, I want to search for designs similar to my style DNA, so that I can find references that match my design preferences.

**수용 기준**:
- [ ] 사용자는 자신의 디자인 DNA를 기반으로 검색할 수 있어야 함
- [ ] 검색 결과는 DNA 유사도 순으로 정렬되어야 함
- [ ] 각 결과에 유사도 점수와 근거가 표시되어야 함

**우선순위**: P1 (High)  
**SRD 참조**: FR-3.1, Gap-3.1.1

#### US-2.4: 카테고리별 필터링

**스토리**:
> As a 디자이너, I want to filter search results by category using my boards, so that I can find designs in specific categories I'm interested in.

**수용 기준**:
- [ ] 사용자는 보드별 카테고리를 선택하여 필터링할 수 있어야 함
- [ ] 선택한 카테고리에 속한 이미지만 검색 결과로 표시되어야 함
- [ ] 여러 카테고리를 동시에 선택할 수 있어야 함

**우선순위**: P1 (High)  
**SRD 참조**: FR-3.2, Gap-3.2.1  
**구현 상태**: ❌ 미구현 (Phase 1 예정)  
**구현 일자**: 미정

#### US-2.5: 검색 결과 보드에 저장

**스토리**:
> As a 디자이너, I want to save search results to my boards, so that I can organize and reference them later.

**수용 기준**:
- [ ] 사용자는 검색 결과 이미지를 클릭하여 보드 선택 다이얼로그를 열 수 있어야 함
- [ ] 사용자는 저장할 보드를 선택할 수 있어야 함
- [ ] 저장 완료 시 확인 메시지가 표시되어야 함
- [ ] 저장된 이미지는 해당 보드에서 확인할 수 있어야 함

**우선순위**: P1 (High)  
**SRD 참조**: FR-3.3, Gap-3.3.1  
**구현 상태**: ❌ 미구현 (Phase 1 예정)  
**구현 일자**: 미정

#### US-2.6: 검색 필터 조정 (다양성/스타일)

**스토리**:
> As a 디자이너, I want to adjust search filters for diversity and style reflection, so that I can control how similar or diverse the search results are.

**수용 기준**:
- [ ] 사용자는 다양성 슬라이더를 조정할 수 있어야 함 (0-100)
- [ ] 사용자는 스타일 반영 슬라이더를 조정할 수 있어야 함 (0-100)
- [ ] 슬라이더 조정 시 검색 결과가 실시간으로 업데이트되어야 함
- [ ] 각 슬라이더의 현재 값이 표시되어야 함

**우선순위**: P2 (Medium)  
**SRD 참조**: FR-3.4, Gap-3.4.1  
**구현 상태**: ❌ 미구현 (Phase 1 예정)  
**구현 일자**: 미정

#### US-2.7: 연관 키워드 필터링

**스토리**:
> As a 디자이너, I want to filter search results by related keywords, so that I can narrow down results to specific themes.

**수용 기준**:
- [ ] 사용자는 연관 키워드를 입력하거나 선택할 수 있어야 함
- [ ] 선택한 키워드가 태그 형태로 표시되어야 함
- [ ] 키워드 태그를 클릭하여 제거할 수 있어야 함
- [ ] 키워드 필터 적용 시 검색 결과가 업데이트되어야 함

**우선순위**: P2 (Medium)  
**SRD 참조**: FR-3.4, Gap-3.4.1  
**구현 상태**: ❌ 미구현 (Phase 1 예정)  
**구현 일자**: 미정

---

### 4.3 사용 사례 (Use Cases)

#### UC-2.1: 텍스트 검색

**액터**: 디자이너  
**전제 조건**: 사용자가 로그인되어 있고 검색 페이지에 접속함  
**기본 흐름**:
1. 사용자가 검색 박스에 키워드 입력 (예: "minimalist web design")
2. 사용자가 검색 버튼 클릭 또는 Enter 키 입력
3. 시스템이 키워드를 기반으로 벡터 검색 실행
4. 시스템이 검색 결과를 유사도 순으로 정렬
5. 시스템이 검색 결과 그리드에 표시

**대안 흐름**:
- 4a. 검색 결과가 없는 경우
  - 4a.1. 시스템이 "검색 결과가 없습니다. 다른 키워드로 시도해보세요." 메시지 표시
  - 4a.2. 사용 사례 종료

**예외 흐름**:
- 네트워크 오류 발생 시 에러 메시지 표시 및 재시도 옵션 제공

**사후 조건**: 검색 결과가 표시됨

**SRD 참조**: FR-3.1

#### UC-2.2: 이미지 검색

**액터**: 디자이너  
**전제 조건**: 사용자가 로그인되어 있고 검색 페이지에 접속함  
**기본 흐름**:
1. 사용자가 이미지 검색 탭 선택
2. 사용자가 이미지 업로드 박스에 이미지 파일 드래그 앤 드롭 또는 파일 선택
3. 시스템이 이미지를 벡터로 변환
4. 시스템이 벡터 유사도 검색 실행
5. 시스템이 검색 결과를 유사도 순으로 정렬
6. 시스템이 각 결과에 유사도 점수 표시
7. 시스템이 검색 결과 그리드에 표시

**대안 흐름**:
- 3a. 이미지 업로드 실패 시
  - 3a.1. 시스템이 에러 메시지 표시
  - 3a.2. 사용 사례 종료

**예외 흐름**: UC-2.1과 동일

**사후 조건**: 이미지 기반 검색 결과가 표시됨

**SRD 참조**: FR-3.1

#### UC-2.3: 사용자 스타일 기반 검색

**액터**: 디자이너  
**전제 조건**: 사용자가 로그인되어 있고 디자인 DNA 프로파일이 존재함  
**기본 흐름**:
1. 사용자가 "내 스타일로 검색" 버튼 클릭
2. 시스템이 사용자의 디자인 DNA 프로파일 조회
3. 시스템이 DNA 유사도 기반 벡터 검색 실행
4. 시스템이 검색 결과를 DNA 유사도 순으로 정렬
5. 시스템이 각 결과에 유사도 점수 및 근거 표시
6. 시스템이 검색 결과 그리드에 표시

**대안 흐름**:
- 2a. 사용자의 DNA 프로파일이 없는 경우
  - 2a.1. 시스템이 "먼저 이미지를 분석하여 디자인 DNA를 생성해주세요." 메시지 표시
  - 2a.2. 사용 사례 종료

**예외 흐름**: UC-2.1과 동일

**사후 조건**: DNA 기반 검색 결과가 표시됨

**SRD 참조**: FR-3.1

#### UC-2.4: 카테고리별 필터링

**액터**: 디자이너  
**전제 조건**: 사용자가 로그인되어 있고 보드가 생성되어 있음  
**기본 흐름**:
1. 사용자가 검색 페이지에서 카테고리 패널 확인
2. 사용자가 특정 보드 카테고리 선택
3. 시스템이 선택한 카테고리에 속한 이미지만 필터링
4. 시스템이 필터링된 검색 결과 표시

**대안 흐름**:
- 2a. 사용자가 여러 카테고리를 선택
  - 2a.1. 시스템이 선택한 모든 카테고리의 합집합으로 필터링
- 2b. 사용자가 카테고리 선택 해제
  - 2b.1. 시스템이 필터를 제거하고 전체 결과 표시

**예외 흐름**: 없음

**사후 조건**: 카테고리별로 필터링된 검색 결과가 표시됨

**SRD 참조**: FR-3.2

#### UC-2.5: 검색 결과 보드에 저장

**액터**: 디자이너  
**전제 조건**: 검색 결과가 표시되어 있음  
**기본 흐름**:
1. 사용자가 검색 결과 이미지에 마우스를 올림
2. 시스템이 "보드에 저장" 버튼 표시
3. 사용자가 "보드에 저장" 버튼 클릭
4. 시스템이 보드 선택 다이얼로그 표시
5. 사용자가 저장할 보드 선택
6. 시스템이 선택한 이미지를 해당 보드에 저장
7. 시스템이 저장 완료 메시지 표시

**대안 흐름**:
- 5a. 사용자가 새 보드 생성 선택
  - 5a.1. 시스템이 보드 생성 다이얼로그 표시
  - 5a.2. 사용자가 보드 이름 입력
  - 5a.3. 시스템이 새 보드 생성 후 이미지 저장
- 5b. 사용자가 취소 클릭
  - 5b.1. 저장 취소
  - 5b.2. 사용 사례 종료

**예외 흐름**:
- 저장 실패 시 에러 메시지 표시 및 재시도 옵션 제공

**사후 조건**: 검색 결과 이미지가 선택한 보드에 저장됨

**SRD 참조**: FR-3.3

#### UC-2.6: 검색 필터 조정

**액터**: 디자이너  
**전제 조건**: 검색 결과가 표시되어 있음  
**기본 흐름**:
1. 사용자가 탐색 제어 패널에서 다양성 슬라이더 조정
2. 시스템이 슬라이더 값을 기반으로 검색 알고리즘 파라미터 조정
3. 시스템이 검색 결과를 재정렬
4. 사용자가 스타일 반영 슬라이더 조정
5. 시스템이 슬라이더 값을 기반으로 검색 알고리즘 파라미터 조정
6. 시스템이 검색 결과를 재정렬

**대안 흐름**: 없음

**예외 흐름**: 없음

**사후 조건**: 필터가 조정된 검색 결과가 표시됨

**SRD 참조**: FR-3.4

---

### 4.4 상세 기능 명세

#### 4.4.1 텍스트 검색 기능

**입력 데이터 구조**:
```json
{
  "query": string,
  "userId": string,
  "filters": {
    "category": string[],
    "diversityLevel": number,
    "styleReflectionLevel": number,
    "keywords": string[]
  }
}
```

**출력 데이터 구조**:
```json
{
  "success": boolean,
  "results": Array<{
    "analysisId": string,
    "imageUrl": string,
    "similarityScore": number,
    "reason": string,
    "metrics": {
      "layout": number,
      "typography": number,
      "color": number,
      "components": number,
      "formLanguage": number
    }
  }>,
  "totalCount": number
}
```

**처리 로직**:
1. 키워드를 벡터로 임베딩
2. 벡터 유사도 검색 실행
3. 필터 조건 적용 (카테고리, 다양성, 스타일 반영률)
4. 결과를 유사도 순으로 정렬
5. 각 결과에 유사도 점수 및 근거 계산

**비즈니스 규칙**:
- 검색 결과는 최대 100개까지 표시
- 유사도 점수는 0-1 범위로 정규화
- 검색 결과는 중앙값 기반 유사도로 정렬

**검증 규칙**:
- 검색어: 최소 1자, 최대 200자
- 다양성 레벨: 0 <= diversityLevel <= 100
- 스타일 반영률: 0 <= styleReflectionLevel <= 100

**SRD 참조**: FR-3.1, Gap-3.1.1

#### 4.4.2 이미지 검색 기능

**입력 데이터 구조**:
```json
{
  "imageUrl": string,
  "userId": string,
  "filters": {
    "category": string[],
    "diversityLevel": number,
    "styleReflectionLevel": number
  }
}
```

**출력 데이터 구조**: UC-2.1과 동일

**처리 로직**:
1. 이미지를 벡터로 임베딩
2. 벡터 유사도 검색 실행
3. 필터 조건 적용
4. 결과를 유사도 순으로 정렬

**비즈니스 규칙**: UC-2.1과 동일

**검증 규칙**:
- 이미지 URL: 유효한 URL 형식
- 이미지 크기: 최대 5MB

**SRD 참조**: FR-3.1

#### 4.4.3 보드 저장 기능

**입력 데이터 구조**:
```json
{
  "boardId": string,
  "analysisId": string,
  "userId": string
}
```

**출력 데이터 구조**:
```json
{
  "success": boolean,
  "message": string
}
```

**처리 로직**:
1. 보드 소유권 확인
2. 보드의 `imageIds` 배열에 `analysisId` 추가
3. 보드의 `updatedAt` 필드 업데이트
4. `analyses` 문서의 `boardIds` 배열에 `boardId` 추가

**비즈니스 규칙**:
- 한 이미지는 최대 100개의 보드에 저장 가능
- 보드는 최대 1000개의 이미지를 포함할 수 있음

**검증 규칙**:
- boardId: 유효한 Firestore 문서 ID
- analysisId: 유효한 Firestore 문서 ID
- 중복 저장 방지 (이미 보드에 있는 경우 에러)

**SRD 참조**: FR-3.3, Gap-3.3.1

---

### 4.5 사용자 시나리오

#### 시나리오 1: 정상 흐름 - 텍스트 검색 및 저장

**Given**: 사용자 "이포트폴리오"가 검색 페이지에 접속함

**When**: 
1. 사용자가 "minimalist web design" 키워드 입력
2. 사용자가 검색 버튼 클릭
3. 시스템이 검색 결과 표시
4. 사용자가 특정 결과 이미지에 마우스를 올리고 "보드에 저장" 클릭
5. 사용자가 "웹 디자인 레퍼런스" 보드 선택
6. 시스템이 이미지를 보드에 저장

**Then**:
- 검색 결과가 유사도 순으로 표시됨
- 이미지가 선택한 보드에 저장됨
- 저장 완료 메시지가 표시됨

**SRD 참조**: FR-3.1, FR-3.3

#### 시나리오 2: 예외 흐름 - 검색 결과 없음

**Given**: 사용자 "이포트폴리오"가 검색 페이지에 접속함

**When**: 
1. 사용자가 매우 특수한 키워드 입력
2. 사용자가 검색 버튼 클릭
3. 시스템이 검색 실행
4. 검색 결과가 없음

**Then**:
- 시스템이 "검색 결과가 없습니다. 다른 키워드로 시도해보세요." 메시지 표시
- 추천 키워드 또는 관련 검색어 제안 표시
- 사용자가 다른 키워드로 재검색할 수 있음

**SRD 참조**: FR-3.1

#### 시나리오 3: 에지 케이스 - 복합 필터 적용

**Given**: 사용자 "이포트폴리오"가 검색 결과를 확인 중임

**When**: 
1. 사용자가 카테고리 "웹 디자인" 선택
2. 사용자가 다양성 슬라이더를 70으로 조정
3. 사용자가 스타일 반영 슬라이더를 80으로 조정
4. 사용자가 연관 키워드 "minimalist" 추가

**Then**:
- 모든 필터가 동시에 적용됨
- 검색 결과가 필터 조건에 맞게 업데이트됨
- 각 필터의 현재 상태가 표시됨

**SRD 참조**: FR-3.2, FR-3.4

---

### 4.6 UI/UX 요구사항

#### 4.6.1 검색 페이지 레이아웃

**화면 구성**:
```
┌─────────────────────────────────────┐
│  Header (로고, 네비게이션)          │
├─────────────────────────────────────┤
│  ┌─────────────────────────────┐   │
│  │ 검색 패널                    │   │
│  │ [텍스트 검색] [이미지 검색]  │   │
│  │ [내 스타일로 검색]           │   │
│  └─────────────────────────────┘   │
├─────────────────────────────────────┤
│  ┌──────────┐  ┌─────────────────┐ │
│  │ 카테고리  │  │ 검색 결과 그리드 │ │
│  │ 패널     │  │                 │ │
│  │          │  │ [이미지들...]   │ │
│  └──────────┘  └─────────────────┘ │
├─────────────────────────────────────┤
│  탐색 제어 패널                      │
│  다양성: [━━━━━━━━━━] 70           │
│  스타일 반영: [━━━━━━━━━━] 80      │
│  연관 키워드: [minimalist] [clean] │
└─────────────────────────────────────┘
```

**인터랙션 패턴**:
- 검색 탭 전환 시 검색 입력 방식 변경
- 이미지 호버 시 "보드에 저장" 버튼 표시
- 슬라이더 조정 시 실시간 결과 업데이트

**피드백 메커니즘**:
- 검색 중에는 로딩 인디케이터 표시
- 저장 완료 시 토스트 메시지 표시
- 검색 결과 없음 시 안내 메시지 표시

**접근성 요구사항**:
- 키보드로 모든 검색 기능 접근 가능
- 스크린 리더가 검색 결과를 읽을 수 있도록 ARIA 레이블 제공

**SRD 참조**: FR-3.1, FR-3.2, FR-3.3, FR-3.4

---

## 5. 기능 3: 마이 페이지 (My Page)

**BRD 참조**: Section 3.1, 3.2  
**SRD 참조**: Section 2.3  
**사용자 여정**: 프로필 관리 → 스타일 추적 → 갤러리 관리

### 5.1 개요

사용자가 자신의 프로필을 관리하고, 디자인 스타일의 변화를 추적하며, 아카이빙된 분석 결과를 갤러리 형태로 관리하는 기능입니다.

**주요 기능**:
- 프로필 이미지 업로드 및 개인정보 수정
- 현재 스타일 대표 이미지 확인
- 스타일 타임라인 확인
- 현재 vs 과거 스타일 비교 분석
- 스타일 갤러리 관리 (폴더 생성, 이미지 정리)

---

### 5.2 사용자 스토리

#### US-3.1: 프로필 이미지 업로드

**스토리**:
> As a 디자이너, I want to upload my profile image, so that other users can see who I am.

**수용 기준**:
- [ ] 사용자는 프로필 이미지를 업로드할 수 있어야 함
- [ ] 업로드 전 이미지 크롭 및 리사이즈가 가능해야 함
- [ ] 업로드 완료 시 프로필 이미지가 즉시 반영되어야 함
- [ ] 이미지 크기는 최대 2MB여야 함

**우선순위**: P1 (High)  
**SRD 참조**: FR-1.3, Gap-1.3.1  
**구현 상태**: ❌ 미구현 (Phase 1 예정)  
**구현 일자**: 미정

#### US-3.2: 개인정보 수정

**스토리**:
> As a 디자이너, I want to edit my personal information, so that I can keep my profile up to date.

**수용 기준**:
- [ ] 사용자는 닉네임을 수정할 수 있어야 함
- [ ] 사용자는 소개 텍스트를 수정할 수 있어야 함
- [ ] 변경 사항이 즉시 저장되어야 함
- [ ] 변경 완료 시 확인 메시지가 표시되어야 함

**우선순위**: P1 (High)  
**SRD 참조**: FR-1.3  
**구현 상태**: ❌ 미구현 (Phase 1 예정)  
**구현 일자**: 미정

#### US-3.3: 현재 스타일 대표 이미지 확인

**스토리**:
> As a 디자이너, I want to see my current representative style image, so that I can understand my current design style.

**수용 기준**:
- [ ] 사용자의 현재 대표 스타일 이미지가 표시되어야 함
- [ ] 대표 스타일 이미지 옆에 스타일 설명 텍스트가 표시되어야 함
- [ ] 대표 스타일의 메트릭 점수가 표시되어야 함
- [ ] 대표 스타일이 없는 경우 안내 메시지가 표시되어야 함

**우선순위**: P1 (High)  
**SRD 참조**: FR-1.3, FR-2.4, Gap-1.3.2  
**구현 상태**: ❌ 미구현 (Phase 1 예정)  
**구현 일자**: 미정

#### US-3.4: 스타일 타임라인 확인

**스토리**:
> As a 디자이너, I want to see my style timeline, so that I can track how my design style has evolved over time.

**수용 기준**:
- [ ] 사용자의 과거 대표 스타일 이미지들이 타임라인 형태로 표시되어야 함
- [ ] 타임라인은 최신순으로 정렬되어야 함
- [ ] 각 스타일의 생성 일시가 표시되어야 함
- [ ] 타임라인을 스크롤하여 과거 스타일을 확인할 수 있어야 함

**우선순위**: P1 (High)  
**SRD 참조**: FR-1.3, FR-2.4, Gap-1.3.2  
**구현 상태**: ❌ 미구현 (Phase 1 예정)  
**구현 일자**: 미정

#### US-3.5: 현재 vs 과거 스타일 비교

**스토리**:
> As a 디자이너, I want to compare my current style with a past style, so that I can see how my design has changed.

**수용 기준**:
- [ ] 사용자가 과거 스타일을 클릭하면 비교 모드가 활성화되어야 함
- [ ] 현재 스타일과 선택한 과거 스타일이 나란히 표시되어야 함
- [ ] 두 스타일의 메트릭 차이가 시각적으로 표시되어야 함
- [ ] 텍스트로 상세 비교 분석이 제공되어야 함

**우선순위**: P2 (Medium)  
**SRD 참조**: FR-1.3, FR-2.4, Gap-1.3.2  
**구현 상태**: ❌ 미구현 (Phase 1 예정)  
**구현 일자**: 미정

#### US-3.6: 스타일 폴더 생성

**스토리**:
> As a 디자이너, I want to create folders to organize my archived designs, so that I can manage my style gallery efficiently.

**수용 기준**:
- [ ] 사용자는 새 폴더를 생성할 수 있어야 함
- [ ] 폴더 이름을 입력할 수 있어야 함
- [ ] 폴더 설명을 입력할 수 있어야 함 (선택사항)
- [ ] 폴더의 대표 이미지를 설정할 수 있어야 함

**우선순위**: P1 (High)  
**SRD 참조**: FR-2.2, Gap-2.2.1  
**구현 상태**: ❌ 미구현 (Phase 1 예정)  
**구현 일자**: 미정

#### US-3.7: 스타일 갤러리 확인

**스토리**:
> As a 디자이너, I want to see my archived designs in a gallery view, so that I can browse through my past work easily.

**수용 기준**:
- [ ] 아카이빙된 분석 결과가 갤러리 형태로 표시되어야 함
- [ ] 그리드 뷰와 리스트 뷰를 전환할 수 있어야 함
- [ ] 폴더별로 필터링할 수 있어야 함
- [ ] 각 이미지를 클릭하면 상세 정보를 확인할 수 있어야 함

**우선순위**: P1 (High)  
**SRD 참조**: FR-2.2, Gap-2.2.1  
**구현 상태**: ❌ 미구현 (Phase 1 예정)  
**구현 일자**: 미정

---

### 5.3 사용 사례 (Use Cases)

#### UC-3.1: 프로필 이미지 업로드

**액터**: 디자이너  
**전제 조건**: 사용자가 로그인되어 있고 마이 페이지에 접속함  
**기본 흐름**:
1. 사용자가 프로필 섹션에서 프로필 이미지 영역 클릭
2. 시스템이 이미지 선택 다이얼로그 표시
3. 사용자가 이미지 파일 선택
4. 시스템이 이미지 크롭/리사이즈 다이얼로그 표시
5. 사용자가 이미지 크롭 및 리사이즈 조정
6. 사용자가 확인 버튼 클릭
7. 시스템이 이미지를 Firebase Storage에 업로드
8. 시스템이 `userProfiles` 문서의 `profileImage` 필드 업데이트
9. 시스템이 프로필 이미지 즉시 반영

**대안 흐름**:
- 3a. 파일 크기가 2MB를 초과하는 경우
  - 3a.1. 시스템이 에러 메시지 표시
  - 3a.2. 사용 사례 종료
- 5a. 사용자가 취소 클릭
  - 5a.1. 업로드 취소
  - 5a.2. 사용 사례 종료

**예외 흐름**:
- 업로드 실패 시 에러 메시지 표시 및 재시도 옵션 제공

**사후 조건**: 프로필 이미지가 업데이트됨

**SRD 참조**: FR-1.3, Gap-1.3.1

#### UC-3.2: 대표 스타일 확인

**액터**: 디자이너  
**전제 조건**: 사용자가 로그인되어 있고 분석 결과가 존재함  
**기본 흐름**:
1. 사용자가 마이 페이지의 대표 스타일 섹션 확인
2. 시스템이 사용자의 현재 대표 스타일 조회 (`getRepresentativeStyle` API)
3. 시스템이 대표 스타일 이미지 및 메트릭 표시
4. 시스템이 스타일 설명 텍스트 표시
5. 사용자가 타임라인에서 과거 스타일 확인

**대안 흐름**:
- 2a. 대표 스타일이 없는 경우
  - 2a.1. 시스템이 "먼저 이미지를 분석하여 대표 스타일을 생성해주세요." 메시지 표시
  - 2a.2. 업로드 페이지로 이동하는 링크 제공

**예외 흐름**: 없음

**사후 조건**: 사용자가 대표 스타일을 확인함

**SRD 참조**: FR-1.3, FR-2.4, Gap-1.3.2

#### UC-3.3: 스타일 비교 분석

**액터**: 디자이너  
**전제 조건**: 사용자가 현재 대표 스타일과 과거 스타일을 확인 중임  
**기본 흐름**:
1. 사용자가 타임라인에서 특정 과거 스타일 클릭
2. 시스템이 비교 모드 활성화
3. 시스템이 현재 스타일과 선택한 과거 스타일을 나란히 표시
4. 시스템이 두 스타일의 메트릭 차이 계산 (`compareStyles` API)
5. 시스템이 메트릭 차이를 시각적으로 표시 (차트, 게이지)
6. 시스템이 텍스트로 상세 비교 분석 제공

**대안 흐름**: 없음

**예외 흐름**: 없음

**사후 조건**: 사용자가 스타일 비교 분석을 확인함

**SRD 참조**: FR-1.3, FR-2.4, Gap-1.3.2

#### UC-3.4: 스타일 폴더 생성

**액터**: 디자이너  
**전제 조건**: 사용자가 로그인되어 있고 스타일 갤러리 섹션에 접속함  
**기본 흐름**:
1. 사용자가 "새 폴더" 버튼 클릭
2. 시스템이 폴더 생성 다이얼로그 표시
3. 사용자가 폴더 이름 입력
4. 사용자가 폴더 설명 입력 (선택사항)
5. 사용자가 확인 버튼 클릭
6. 시스템이 `styleFolders` 컬렉션에 새 문서 생성 (`createStyleFolder` API)
7. 시스템이 폴더 목록에 새 폴더 추가

**대안 흐름**:
- 3a. 폴더 이름이 중복되는 경우
  - 3a.1. 시스템이 "이미 존재하는 폴더 이름입니다." 에러 메시지 표시
  - 3a.2. 사용자가 다른 이름 입력

**예외 흐름**:
- 생성 실패 시 에러 메시지 표시 및 재시도 옵션 제공

**사후 조건**: 새 폴더가 생성되고 폴더 목록에 표시됨

**SRD 참조**: FR-2.2, Gap-2.2.1

#### UC-3.5: 스타일 갤러리 확인

**액터**: 디자이너  
**전제 조건**: 사용자가 로그인되어 있고 아카이빙된 분석 결과가 존재함  
**기본 흐름**:
1. 사용자가 마이 페이지의 스타일 갤러리 섹션 확인
2. 시스템이 사용자의 아카이빙된 분석 결과 조회
3. 시스템이 갤러리 그리드에 이미지 표시
4. 사용자가 특정 이미지 클릭
5. 시스템이 해당 분석의 상세 정보 표시

**대안 흐름**:
- 4a. 사용자가 폴더 선택
  - 4a.1. 시스템이 선택한 폴더의 이미지만 표시
- 4b. 사용자가 뷰 모드 전환 (그리드 ↔ 리스트)
  - 4b.1. 시스템이 선택한 뷰 모드로 표시

**예외 흐름**: 없음

**사후 조건**: 사용자가 스타일 갤러리를 확인함

**SRD 참조**: FR-2.2, Gap-2.2.1

---

### 5.4 상세 기능 명세

#### 5.4.1 대표 스타일 선정 기능

**입력 데이터 구조**:
```json
{
  "userId": string
}
```

**출력 데이터 구조**:
```json
{
  "success": boolean,
  "currentStyle": {
    "styleId": string,
    "analysisId": string,
    "imageUrl": string,
    "metrics": {
      "layout": number,
      "typography": number,
      "color": number,
      "components": number,
      "formLanguage": number,
      "overallScore": number
    },
    "description": string,
    "createdAt": string
  },
  "timeline": Array<{
    "styleId": string,
    "createdAt": string,
    "imageUrl": string
  }>
}
```

**처리 로직**:
1. 사용자의 모든 분석 결과 조회
2. 최근 분석 결과들을 기반으로 대표 스타일 선정 알고리즘 실행
3. 대표 스타일을 `representativeStyles` 컬렉션에 저장
4. 이전 대표 스타일의 `isCurrent` 필드를 false로 변경
5. 새 대표 스타일의 `isCurrent` 필드를 true로 설정
6. 타임라인 데이터 조회 및 반환

**비즈니스 규칙**:
- 대표 스타일은 최근 10개 분석 결과를 기반으로 선정
- 대표 스타일은 최소 3개 이상의 분석 결과가 있어야 생성 가능
- 타임라인은 최대 50개까지 표시

**검증 규칙**:
- userId: 유효한 Firebase Auth UID
- 대표 스타일이 없을 경우 null 반환

**SRD 참조**: FR-1.3, FR-2.4, Gap-1.3.2

#### 5.4.2 스타일 비교 분석 기능

**입력 데이터 구조**:
```json
{
  "currentStyleId": string,
  "pastStyleId": string,
  "userId": string
}
```

**출력 데이터 구조**:
```json
{
  "success": boolean,
  "comparison": {
    "metricsDiff": {
      "layout": number,
      "typography": number,
      "color": number,
      "components": number,
      "formLanguage": number,
      "overallScore": number
    },
    "textAnalysis": string,
    "improvements": string[],
    "maintainedStrengths": string[]
  }
}
```

**처리 로직**:
1. 현재 스타일과 과거 스타일의 메트릭 조회
2. 각 메트릭의 차이 계산 (현재 - 과거)
3. AI 모델을 통한 텍스트 비교 분석 생성
4. 개선된 영역과 유지된 강점 도출
5. 비교 결과 반환

**비즈니스 규칙**:
- 메트릭 차이는 절대값으로 계산
- 텍스트 분석은 최대 1000자
- 개선 영역과 유지 강점은 각각 최대 5개까지

**검증 규칙**:
- currentStyleId: 유효한 스타일 ID
- pastStyleId: 유효한 스타일 ID
- 두 스타일 모두 같은 사용자의 것이어야 함

**SRD 참조**: FR-1.3, FR-2.4, Gap-1.3.2

---

### 5.5 사용자 시나리오

#### 시나리오 1: 정상 흐름 - 프로필 관리 및 스타일 확인

**Given**: 사용자 "박성장"이 마이 페이지에 접속함

**When**: 
1. 사용자가 프로필 이미지 영역 클릭
2. 사용자가 새 프로필 이미지 선택 및 크롭
3. 사용자가 확인 버튼 클릭
4. 시스템이 프로필 이미지 업데이트
5. 사용자가 대표 스타일 섹션 확인

**Then**:
- 프로필 이미지가 업데이트됨
- 현재 대표 스타일 이미지와 메트릭이 표시됨
- 타임라인에 과거 스타일들이 표시됨

**SRD 참조**: FR-1.3, FR-2.4

#### 시나리오 2: 예외 흐름 - 대표 스타일 없음

**Given**: 사용자 "김디자인"이 처음으로 서비스를 사용함

**When**: 
1. 사용자가 마이 페이지의 대표 스타일 섹션 확인
2. 시스템이 대표 스타일 조회
3. 대표 스타일이 없음

**Then**:
- 시스템이 "먼저 이미지를 분석하여 대표 스타일을 생성해주세요." 메시지 표시
- 업로드 페이지로 이동하는 링크 제공
- 사용자가 업로드 페이지로 이동하여 이미지 분석 가능

**SRD 참조**: FR-1.3, FR-2.4

#### 시나리오 3: 에지 케이스 - 스타일 비교

**Given**: 사용자 "이포트폴리오"가 대표 스타일과 타임라인을 확인 중임

**When**: 
1. 사용자가 6개월 전 스타일 클릭
2. 시스템이 비교 모드 활성화
3. 시스템이 현재와 6개월 전 스타일 비교 분석

**Then**:
- 두 스타일이 나란히 표시됨
- 메트릭 차이가 시각적으로 표시됨
- 텍스트로 상세 비교 분석이 제공됨
- 개선된 영역과 유지된 강점이 명확히 표시됨

**SRD 참조**: FR-1.3, FR-2.4

---

### 5.6 UI/UX 요구사항

#### 5.6.1 마이 페이지 레이아웃

**화면 구성**:
```
┌─────────────────────────────────────┐
│  Header (로고, 네비게이션)          │
├─────────────────────────────────────┤
│  ┌──────────┐  ┌─────────────────┐ │
│  │ 프로필   │  │ 대표 스타일      │ │
│  │ 섹션     │  │ (현재)          │ │
│  │ [이미지] │  │ [이미지]        │ │
│  │ [정보]   │  │ [메트릭]        │ │
│  └──────────┘  └─────────────────┘ │
├─────────────────────────────────────┤
│  스타일 타임라인                     │
│  [과거 스타일들...]                 │
├─────────────────────────────────────┤
│  스타일 갤러리                       │
│  [폴더들...] [이미지 그리드...]     │
└─────────────────────────────────────┘
```

**인터랙션 패턴**:
- 프로필 이미지 클릭 시 업로드 다이얼로그 표시
- 타임라인의 과거 스타일 클릭 시 비교 모드 활성화
- 갤러리 이미지 호버 시 상세 정보 툴팁 표시

**피드백 메커니즘**:
- 프로필 업데이트 완료 시 토스트 메시지 표시
- 폴더 생성 완료 시 확인 메시지 표시

**접근성 요구사항**:
- 키보드로 모든 기능 접근 가능
- 스크린 리더가 메트릭 점수를 읽을 수 있도록 ARIA 레이블 제공

**SRD 참조**: FR-1.3, FR-2.2, FR-2.4

---

## 6. 기능 4: 설정 (Settings)

**BRD 참조**: Section 5.5  
**SRD 참조**: Section 2.4  
**사용자 여정**: 계정 관리 → 보안 설정 → 정보 확인

### 6.1 개요

사용자가 계정 정보를 관리하고, 보안 설정을 변경하며, 서비스 정보를 확인하는 기능입니다.

**주요 기능**:
- 계정 관리 (이메일, 전화번호, 구독 정보)
- 보안 설정 (비밀번호 변경, 신뢰할 수 있는 장치 관리)
- 알림 설정
- 정보 센터 (도움말, 약관, 개인정보 보호 정책)

---

### 6.2 사용자 스토리

#### US-4.1: 이메일 변경

**스토리**:
> As a 디자이너, I want to change my email address, so that I can keep my account information up to date.

**수용 기준**:
- [ ] 사용자는 현재 이메일 주소를 확인할 수 있어야 함
- [ ] 사용자는 새 이메일 주소를 입력할 수 있어야 함
- [ ] 시스템이 새 이메일로 인증 메일 발송
- [ ] 사용자가 인증 링크 클릭 시 이메일 변경 완료
- [ ] 변경 완료 시 확인 메시지가 표시되어야 함

**우선순위**: P0 (Critical)  
**SRD 참조**: NFR-2.1, Gap-NFR-2.1  
**구현 상태**: ❌ 미구현 (Phase 1 예정)  
**구현 일자**: 미정

#### US-4.2: 비밀번호 변경

**스토리**:
> As a 디자이너, I want to change my password, so that I can keep my account secure.

**수용 기준**:
- [ ] 사용자는 현재 비밀번호를 입력할 수 있어야 함
- [ ] 사용자는 새 비밀번호를 입력할 수 있어야 함
- [ ] 사용자는 새 비밀번호를 확인 입력할 수 있어야 함
- [ ] 시스템이 비밀번호 강도 검증
- [ ] 현재 비밀번호가 일치하지 않으면 에러 메시지 표시
- [ ] 새 비밀번호와 확인 비밀번호가 일치하지 않으면 에러 메시지 표시
- [ ] 변경 완료 시 확인 메시지가 표시되어야 함

**우선순위**: P0 (Critical)  
**SRD 참조**: NFR-2.1, Gap-NFR-2.1  
**구현 상태**: ❌ 미구현 (Phase 1 예정)  
**구현 일자**: 미정

#### US-4.3: 신뢰할 수 있는 장치 관리

**스토리**:
> As a 디자이너, I want to see and manage my trusted devices, so that I can control which devices have access to my account.

**수용 기준**:
- [ ] 사용자는 현재 로그인된 장치 목록을 확인할 수 있어야 함
- [ ] 각 장치의 정보(기기명, 브라우저, 마지막 접속 시간)가 표시되어야 함
- [ ] 사용자는 특정 장치를 제거할 수 있어야 함
- [ ] 장치 제거 시 해당 장치에서 자동 로그아웃되어야 함

**우선순위**: P1 (High)  
**SRD 참조**: NFR-2.1, Gap-NFR-2.1  
**구현 상태**: ❌ 미구현 (Phase 1 예정)  
**구현 일자**: 미정

#### US-4.4: 알림 설정 변경

**스토리**:
> As a 디자이너, I want to control my notification settings, so that I can receive only the notifications I want.

**수용 기준**:
- [ ] 사용자는 히스토리 알림 on/off를 설정할 수 있어야 함
- [ ] 사용자는 주간 리포트 알림 on/off를 설정할 수 있어야 함
- [ ] 사용자는 목표 알림 on/off를 설정할 수 있어야 함
- [ ] 설정 변경 시 즉시 저장되어야 함

**우선순위**: P2 (Medium)  
**SRD 참조**: NFR-2.1  
**구현 상태**: ❌ 미구현 (Phase 1 예정)  
**구현 일자**: 미정

#### US-4.5: 약관 및 정책 확인

**스토리**:
> As a 디자이너, I want to access terms of service and privacy policy, so that I can understand how my data is used.

**수용 기준**:
- [ ] 사용자는 이용약관 링크를 클릭하여 약관을 확인할 수 있어야 함
- [ ] 사용자는 개인정보 보호 정책 링크를 클릭하여 정책을 확인할 수 있어야 함
- [ ] 약관 및 정책은 새 탭에서 열려야 함

**우선순위**: P2 (Medium)  
**SRD 참조**: NFR-2.2  
**구현 상태**: ❌ 미구현 (Phase 1 예정)  
**구현 일자**: 미정

---

### 6.3 사용 사례 (Use Cases)

#### UC-4.1: 이메일 변경

**액터**: 디자이너  
**전제 조건**: 사용자가 로그인되어 있고 설정 페이지에 접속함  
**기본 흐름**:
1. 사용자가 계정 관리 섹션에서 이메일 변경 버튼 클릭
2. 시스템이 현재 이메일 주소 표시
3. 사용자가 새 이메일 주소 입력
4. 시스템이 이메일 형식 검증
5. 시스템이 새 이메일로 인증 메일 발송
6. 사용자가 이메일에서 인증 링크 클릭
7. 시스템이 이메일 변경 완료
8. 시스템이 확인 메시지 표시

**대안 흐름**:
- 4a. 이메일 형식이 유효하지 않은 경우
  - 4a.1. 시스템이 "유효한 이메일 주소를 입력해주세요." 에러 메시지 표시
  - 4a.2. 사용자가 다시 입력
- 6a. 인증 링크 만료 시
  - 6a.1. 시스템이 "인증 링크가 만료되었습니다. 다시 요청해주세요." 메시지 표시
  - 6a.2. 사용자가 다시 인증 메일 요청

**예외 흐름**:
- 이메일 발송 실패 시 에러 메시지 표시 및 재시도 옵션 제공

**사후 조건**: 이메일 주소가 변경됨

**SRD 참조**: NFR-2.1, Gap-NFR-2.1

#### UC-4.2: 비밀번호 변경

**액터**: 디자이너  
**전제 조건**: 사용자가 로그인되어 있고 설정 페이지에 접속함  
**기본 흐름**:
1. 사용자가 보안 설정 섹션에서 비밀번호 변경 버튼 클릭
2. 시스템이 비밀번호 변경 폼 표시
3. 사용자가 현재 비밀번호 입력
4. 사용자가 새 비밀번호 입력
5. 사용자가 새 비밀번호 확인 입력
6. 시스템이 현재 비밀번호 검증
7. 시스템이 새 비밀번호 강도 검증
8. 시스템이 새 비밀번호와 확인 비밀번호 일치 확인
9. 시스템이 비밀번호 변경
10. 시스템이 확인 메시지 표시

**대안 흐름**:
- 6a. 현재 비밀번호가 일치하지 않는 경우
  - 6a.1. 시스템이 "현재 비밀번호가 일치하지 않습니다." 에러 메시지 표시
  - 6a.2. 사용 사례 종료
- 7a. 새 비밀번호가 약한 경우
  - 7a.1. 시스템이 "비밀번호가 너무 약합니다. 8자 이상, 영문, 숫자, 특수문자를 포함해주세요." 에러 메시지 표시
  - 7a.2. 사용자가 더 강한 비밀번호 입력
- 8a. 새 비밀번호와 확인 비밀번호가 일치하지 않는 경우
  - 8a.1. 시스템이 "비밀번호가 일치하지 않습니다." 에러 메시지 표시
  - 8a.2. 사용자가 다시 입력

**예외 흐름**:
- 비밀번호 변경 실패 시 에러 메시지 표시 및 재시도 옵션 제공

**사후 조건**: 비밀번호가 변경됨

**SRD 참조**: NFR-2.1, Gap-NFR-2.1

#### UC-4.3: 신뢰할 수 있는 장치 관리

**액터**: 디자이너  
**전제 조건**: 사용자가 로그인되어 있고 설정 페이지에 접속함  
**기본 흐름**:
1. 사용자가 보안 설정 섹션에서 "신뢰할 수 있는 장치" 링크 클릭
2. 시스템이 현재 로그인된 장치 목록 표시
3. 사용자가 특정 장치의 "제거" 버튼 클릭
4. 시스템이 확인 다이얼로그 표시
5. 사용자가 확인 클릭
6. 시스템이 해당 장치에서 세션 종료
7. 시스템이 장치 목록에서 제거
8. 시스템이 확인 메시지 표시

**대안 흐름**:
- 5a. 사용자가 취소 클릭
  - 5a.1. 제거 취소
  - 5a.2. 사용 사례 종료

**예외 흐름**: 없음

**사후 조건**: 선택한 장치가 제거되고 해당 장치에서 로그아웃됨

**SRD 참조**: NFR-2.1, Gap-NFR-2.1

---

### 6.4 상세 기능 명세

#### 6.4.1 계정 관리 기능

**입력 데이터 구조**:
```json
{
  "userId": string,
  "updates": {
    "email": string,
    "phone": string,
    "subscription": {
      "plan": "free" | "premium",
      "expiresAt": string
    }
  }
}
```

**출력 데이터 구조**:
```json
{
  "success": boolean,
  "message": string
}
```

**처리 로직**:
1. 사용자 인증 확인
2. 업데이트할 필드 검증
3. Firebase Auth 및 Firestore 업데이트
4. 이메일 변경 시 인증 메일 발송

**비즈니스 규칙**:
- 이메일 변경은 인증 필수
- 전화번호 변경은 인증 필수
- 구독 정보는 관리자만 변경 가능

**검증 규칙**:
- 이메일: 유효한 이메일 형식
- 전화번호: 유효한 전화번호 형식
- 구독 플랜: "free" 또는 "premium"

**SRD 참조**: NFR-2.1, Gap-NFR-2.1

---

### 6.5 사용자 시나리오

#### 시나리오 1: 정상 흐름 - 비밀번호 변경

**Given**: 사용자 "김디자인"이 설정 페이지에 접속함

**When**: 
1. 사용자가 보안 설정 섹션에서 비밀번호 변경 버튼 클릭
2. 사용자가 현재 비밀번호 입력
3. 사용자가 새 비밀번호 입력 (강도 충족)
4. 사용자가 새 비밀번호 확인 입력
5. 사용자가 확인 버튼 클릭
6. 시스템이 비밀번호 변경

**Then**:
- 비밀번호가 성공적으로 변경됨
- 확인 메시지가 표시됨
- 다음 로그인부터 새 비밀번호 사용 가능

**SRD 참조**: NFR-2.1, Gap-NFR-2.1

#### 시나리오 2: 예외 흐름 - 현재 비밀번호 불일치

**Given**: 사용자 "김디자인"이 비밀번호 변경 폼을 열음

**When**: 
1. 사용자가 잘못된 현재 비밀번호 입력
2. 사용자가 새 비밀번호 입력
3. 사용자가 확인 버튼 클릭
4. 시스템이 현재 비밀번호 검증

**Then**:
- 시스템이 "현재 비밀번호가 일치하지 않습니다." 에러 메시지 표시
- 비밀번호가 변경되지 않음
- 사용자가 올바른 현재 비밀번호를 다시 입력할 수 있음

**SRD 참조**: NFR-2.1, Gap-NFR-2.1

---

### 6.6 UI/UX 요구사항

#### 6.6.1 설정 페이지 레이아웃

**화면 구성**:
```
┌─────────────────────────────────────┐
│  Header (로고, 네비게이션)          │
├─────────────────────────────────────┤
│  설정 탭: [계정] [보안] [알림] [정보]│
├─────────────────────────────────────┤
│  계정 관리 섹션                      │
│  - 이메일: user@example.com [변경]  │
│  - 전화번호: 010-1234-5678 [변경]   │
│  - 구독: 프리미엄 [관리]            │
├─────────────────────────────────────┤
│  보안 설정 섹션                      │
│  - 비밀번호: [변경]                 │
│  - 신뢰할 수 있는 장치: [관리]      │
├─────────────────────────────────────┤
│  알림 설정 섹션                      │
│  - 히스토리 알림: [ON/OFF]          │
│  - 주간 리포트: [ON/OFF]            │
├─────────────────────────────────────┤
│  정보 센터 섹션                      │
│  - 도움말 센터 [링크]                │
│  - 이용약관 [링크]                   │
│  - 개인정보 보호 정책 [링크]         │
└─────────────────────────────────────┘
```

**인터랙션 패턴**:
- 설정 탭 클릭 시 해당 섹션으로 스크롤
- 변경 버튼 클릭 시 모달 다이얼로그 표시
- 토글 스위치로 알림 설정 on/off

**피드백 메커니즘**:
- 변경 완료 시 토스트 메시지 표시
- 에러 발생 시 에러 메시지 표시

**접근성 요구사항**:
- 키보드로 모든 설정 항목 접근 가능
- 스크린 리더가 각 설정 항목을 읽을 수 있도록 ARIA 레이블 제공

**SRD 참조**: NFR-2.1, NFR-2.2

---

## 7. 기능 간 상호작용 및 플로우

### 7.1 사용자 여정 다이어그램

**전체 사용자 여정**:
```
시작
 ↓
온보딩 (첫 방문 사용자)
 ↓
업로드 및 분석
 ├─ 이미지 업로드
 ├─ 분석 실행
 └─ 결과 확인
     ├─ 색상 팔레트 확인
     ├─ 연관 키워드 확인
     └─ 아카이빙
         ↓
서칭
 ├─ 검색 실행 (텍스트/이미지/스타일)
 ├─ 결과 탐색
 └─ 보드에 저장
     ↓
마이 페이지
 ├─ 프로필 확인
 ├─ 스타일 확인
 ├─ 타임라인 확인
 └─ 갤러리 관리
     ↓
설정 (필요 시)
 ├─ 계정 관리
 ├─ 보안 설정
 └─ 알림 설정
```

### 7.2 기능 간 데이터 플로우

#### 7.2.1 업로드 → 서칭 플로우

**데이터 플로우**:
1. 사용자가 이미지를 업로드하고 분석 실행
2. 분석 결과에서 연관 키워드 추출
3. 사용자가 연관 키워드를 클릭
4. 검색 페이지로 이동하여 해당 키워드로 검색 실행
5. 검색 결과 표시

**연관 기능**:
- 업로드 및 분석: 연관 키워드 추출 (US-1.9)
- 서칭: 텍스트 검색 (US-2.1)

#### 7.2.2 업로드 → 마이페이지 플로우

**데이터 플로우**:
1. 사용자가 이미지를 업로드하고 분석 실행
2. 분석 결과를 아카이빙
3. 아카이빙된 분석이 스타일 갤러리에 추가
4. 대표 스타일 선정 알고리즘이 실행되어 대표 스타일 업데이트
5. 마이 페이지에서 업데이트된 대표 스타일 확인

**연관 기능**:
- 업로드 및 분석: 분석 결과 아카이빙 (US-1.10)
- 마이 페이지: 대표 스타일 확인 (US-3.3)

#### 7.2.3 서칭 → 마이페이지 플로우

**데이터 플로우**:
1. 사용자가 검색 결과를 보드에 저장
2. 저장된 이미지가 해당 보드에 추가
3. 마이 페이지의 스타일 갤러리에서 보드별로 이미지 확인

**연관 기능**:
- 서칭: 검색 결과 보드에 저장 (US-2.5)
- 마이 페이지: 스타일 갤러리 확인 (US-3.7)

---

## 8. 예외 상황 및 에러 처리

### 8.1 예외 상황 정의

#### 8.1.1 네트워크 오류

**상황**: 인터넷 연결이 끊어지거나 서버와의 통신 실패

**처리 방법**:
- 사용자에게 "네트워크 연결을 확인해주세요." 메시지 표시
- 재시도 버튼 제공
- 오프라인 상태일 경우 오프라인 모드 안내

**영향받는 기능**:
- 모든 기능 (업로드, 분석, 검색, 저장 등)

#### 8.1.2 파일 업로드 실패

**상황**: 파일 업로드 중 오류 발생

**처리 방법**:
- 사용자에게 "파일 업로드에 실패했습니다." 메시지 표시
- 재시도 버튼 제공
- 파일 크기 또는 형식 문제인 경우 구체적인 안내 메시지 표시

**영향받는 기능**:
- 업로드 및 분석 (US-1.1, US-1.2)

#### 8.1.3 분석 실패

**상황**: AI 모델 분석 중 오류 발생

**처리 방법**:
- 사용자에게 "분석 중 오류가 발생했습니다." 메시지 표시
- 재시도 버튼 제공
- 오류 로그를 시스템에 기록

**영향받는 기능**:
- 업로드 및 분석 (US-1.5)

#### 8.1.4 인증 오류

**상황**: 사용자 인증 토큰 만료 또는 유효하지 않음

**처리 방법**:
- 사용자에게 "로그인이 만료되었습니다." 메시지 표시
- 로그인 페이지로 리다이렉트
- 진행 중인 작업은 임시 저장 (가능한 경우)

**영향받는 기능**:
- 모든 기능 (인증이 필요한 모든 기능)

#### 8.1.5 권한 오류

**상황**: 사용자가 접근 권한이 없는 리소스에 접근 시도

**처리 방법**:
- 사용자에게 "접근 권한이 없습니다." 메시지 표시
- 이전 페이지로 리다이렉트 또는 홈으로 이동

**영향받는 기능**:
- 모든 기능 (권한이 필요한 기능)

### 8.2 에러 처리 요구사항

#### 8.2.1 사용자 친화적 에러 메시지

**요구사항**:
- 에러 메시지는 기술적 용어를 피하고 사용자가 이해하기 쉬운 언어로 작성
- 에러 원인을 명확히 설명
- 해결 방법을 제시 (가능한 경우)

**예시**:
- ❌ "Error 500: Internal Server Error"
- ✅ "서버에 일시적인 문제가 발생했습니다. 잠시 후 다시 시도해주세요."

#### 8.2.2 에러 복구 메커니즘

**요구사항**:
- 재시도 가능한 작업은 재시도 버튼 제공
- 자동 재시도는 최대 3회까지
- 재시도 간격은 지수 백오프 (1초, 2초, 4초)

#### 8.2.3 에러 로깅

**요구사항**:
- 모든 에러는 서버에 로깅
- 사용자 정보, 에러 메시지, 스택 트레이스 포함
- 에러 통계 대시보드 제공 (관리자용)

---

## 9. 성능 및 사용성 요구사항

### 9.1 성능 요구사항

#### 9.1.1 페이지 로딩 시간

**요구사항**:
- 초기 페이지 로딩: 3초 이내
- 페이지 전환: 1초 이내
- 이미지 로딩: 2초 이내 (네트워크 상태에 따라 다를 수 있음)

**측정 방법**:
- Lighthouse 성능 점수 90점 이상
- First Contentful Paint (FCP): 1.8초 이내
- Largest Contentful Paint (LCP): 2.5초 이내

**SRD 참조**: NFR-1.1, NFR-1.3

#### 9.1.2 이미지 업로드 속도

**요구사항**:
- 5MB 이미지 업로드: 10초 이내 (일반적인 네트워크 환경)
- 업로드 진행률 표시 필수

**SRD 참조**: NFR-1.1

#### 9.1.3 검색 응답 시간

**요구사항**:
- 텍스트 검색: 2초 이내
- 이미지 검색: 5초 이내
- 검색 결과 표시: 1초 이내

**SRD 참조**: NFR-1.1, NFR-1.3

### 9.2 사용성 요구사항

#### 9.2.1 접근성 (WCAG 2.1 AA 준수)

**요구사항**:
- 키보드로 모든 기능 접근 가능
- 스크린 리더 호환 (ARIA 레이블 제공)
- 색상 대비 비율 4.5:1 이상
- 포커스 표시 명확

**검증 방법**:
- WAVE 접근성 도구 사용
- 키보드만으로 모든 기능 테스트
- 스크린 리더 테스트 (NVDA, JAWS)

**SRD 참조**: NFR-5.1

#### 9.2.2 반응형 디자인

**요구사항**:
- 모바일 (320px ~ 768px): 모든 기능 사용 가능
- 태블릿 (768px ~ 1024px): 최적화된 레이아웃
- 데스크탑 (1024px 이상): 전체 기능 사용 가능

**검증 방법**:
- 다양한 디바이스에서 테스트
- 브라우저 개발자 도구로 반응형 테스트

**SRD 참조**: FR-4.2, NFR-5.1

#### 9.2.3 사용자 피드백 메커니즘

**요구사항**:
- 모든 사용자 액션에 대한 즉각적인 피드백 제공
- 로딩 중에는 로딩 인디케이터 표시
- 완료 시 성공 메시지 표시
- 실패 시 에러 메시지 표시

**피드백 유형**:
- 토스트 메시지 (짧은 메시지)
- 모달 다이얼로그 (중요한 확인)
- 인라인 메시지 (폼 검증 등)

**SRD 참조**: FR-4.1

---

## 10. 부록

### 10.1 용어 정의

- **디자인 DNA**: 사용자의 디자인 스타일을 수치화한 프로파일
- **5축 메트릭**: Layout, Typography, Color, Components, Form Language
- **대표 스타일**: 사용자의 현재 디자인 스타일을 가장 잘 나타내는 이미지
- **보드**: 사용자가 생성한 이미지 컬렉션
- **스타일 폴더**: 아카이빙된 분석 결과를 정리하는 폴더

### 10.2 추적성 매트릭스

| FRD 사용자 스토리 | SRD 기능 요구사항 | TSD API/컴포넌트 |
|-----------------|-----------------|----------------|
| US-1.1~US-1.10 | FR-1.1, FR-1.2, FR-1.3 | Section 2.1.1~2.1.14, 5.2.3.1 |
| US-2.1~US-2.7 | FR-3.1, FR-3.2, FR-3.3, FR-3.4 | Section 2.1.15~2.1.17, 5.2.3.2 |
| US-3.1~US-3.7 | FR-1.3, FR-2.2, FR-2.4 | Section 2.1.18~2.1.21, 5.2.3.3 |
| US-4.1~US-4.5 | NFR-2.1, NFR-2.2 | Section 2.1.5, 5.2.3.4 |

### 10.3 변경 이력

| 버전 | 날짜 | 변경 내용 | 작성자 |
|------|------|----------|--------|
| 1.0 | 2025-11-04 | 초기 문서 작성 | AI Assistant |
| 1.1 | 2025-01-19 | Firebase 인프라 설정 정보 추가 및 Storage/Firestore 경로 명시, Phase 0 완료 상태 반영, Storage 리전 정보 정정 | dys 팀 |
| 1.2 | 2025.01.19 | 모든 사용자 스토리에 구현 상태 필드 추가, 미구현 상태 명시 | dys 팀 |
| 1.3 | 2025.01.XX | 프로젝트명 통일 (DYSS → dysproto), Storage 경로 수정 (images → users/analyses), Firestore 컬렉션명 수정 (image → analyses), 실제 구현 상태 반영 | dys 팀 |

---

**문서 작성 완료일**: 2025년 1월 19일  
**다음 검토 예정일**: 기능 구현 시작 전

